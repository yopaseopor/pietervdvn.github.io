{"version":3,"sources":["vendor/Leaflet.AccuratePosition.js"],"names":["L","Map","include","_defaultAccuratePositionOptions","maxWait","desiredAccuracy","findAccuratePosition","options","navigator","geolocation","_handleAccuratePositionError","code","message","_accuratePositionEventCount","_accuratePositionOptions","extend","enableHighAccuracy","maximumAge","timeout","onResponse","bind","_checkAccuratePosition","onError","onTimeout","_handleAccuratePositionTimeout","_accuratePositionWatchId","watchPosition","_accuratePositionTimerId","setTimeout","clearWatch","_lastCheckedAccuratePosition","_handleAccuratePositionResponse","_cleanUpAccuratePositioning","clearTimeout","pos","accuracyReached","coords","accuracy","_handleAccuratePositionProgress","_prepareAccuratePositionData","lat","latitude","lng","longitude","latlng","LatLng","latAccuracy","lngAccuracy","Math","cos","PI","bounds","latLngBounds","data","timestamp","i","fire","error","c","console","log"],"mappings":"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","file":"Leaflet.AccuratePosition.js","sourceRoot":"..","sourcesContent":["/**\n * Leaflet.AccuratePosition aims to provide an accurate device location when simply calling map.locate() doesnâ€™t.\n * https://github.com/m165437/Leaflet.AccuratePosition\n *\n * Greg Wilson's getAccurateCurrentPosition() forked to be a Leaflet plugin\n * https://github.com/gwilson/getAccurateCurrentPosition\n *\n * Copyright (C) 2013 Greg Wilson, 2014 Michael Schmidt-Voigt\n */\n\nL.Map.include({\n    _defaultAccuratePositionOptions: {\n        maxWait: 10000,\n        desiredAccuracy: 20\n    },\n\n    findAccuratePosition: function (options) {\n\n        if (!navigator.geolocation) {\n            this._handleAccuratePositionError({\n                code: 0,\n                message: 'Geolocation not supported.'\n            });\n            return this;\n        }\n\n        this._accuratePositionEventCount = 0;\n        this._accuratePositionOptions = L.extend(this._defaultAccuratePositionOptions, options);\n        this._accuratePositionOptions.enableHighAccuracy = true;\n        this._accuratePositionOptions.maximumAge = 0;\n\n        if (!this._accuratePositionOptions.timeout)\n            this._accuratePositionOptions.timeout = this._accuratePositionOptions.maxWait;\n\n        var onResponse = L.bind(this._checkAccuratePosition, this),\n            onError = L.bind(this._handleAccuratePositionError, this),\n            onTimeout = L.bind(this._handleAccuratePositionTimeout, this);\n\n        this._accuratePositionWatchId = navigator.geolocation.watchPosition(\n            onResponse,\n            onError,\n            this._accuratePositionOptions);\n\n        this._accuratePositionTimerId = setTimeout(\n            onTimeout,\n            this._accuratePositionOptions.maxWait);\n    },\n\n    _handleAccuratePositionTimeout: function() {\n        navigator.geolocation.clearWatch(this._accuratePositionWatchId);\n\n        if (typeof this._lastCheckedAccuratePosition !== 'undefined') {\n            this._handleAccuratePositionResponse(this._lastCheckedAccuratePosition);\n        } else {\n            this._handleAccuratePositionError({\n                code: 3,\n                message: 'Timeout expired'\n            });\n        }\n\n        return this;\n    },\n\n    _cleanUpAccuratePositioning: function () {\n        clearTimeout(this._accuratePositionTimerId);\n        navigator.geolocation.clearWatch(this._accuratePositionWatchId);\n    },\n\n    _checkAccuratePosition: function (pos) {\n        var accuracyReached = pos.coords.accuracy <= this._accuratePositionOptions.desiredAccuracy;\n\n        this._lastCheckedAccuratePosition = pos;\n        this._accuratePositionEventCount = this._accuratePositionEventCount + 1;\n\n        if (accuracyReached && (this._accuratePositionEventCount > 1)) {\n            this._cleanUpAccuratePositioning();\n            this._handleAccuratePositionResponse(pos);\n        } else {\n            this._handleAccuratePositionProgress(pos);\n        }\n    },\n\n    _prepareAccuratePositionData: function (pos) {\n        var lat = pos.coords.latitude,\n            lng = pos.coords.longitude,\n            latlng = new L.LatLng(lat, lng),\n\n            latAccuracy = 180 * pos.coords.accuracy / 40075017,\n            lngAccuracy = latAccuracy / Math.cos(Math.PI / 180 * lat),\n\n            bounds = L.latLngBounds(\n                [lat - latAccuracy, lng - lngAccuracy],\n                [lat + latAccuracy, lng + lngAccuracy]);\n\n        var data = {\n            latlng: latlng,\n            bounds: bounds,\n            timestamp: pos.timestamp\n        };\n\n        for (var i in pos.coords) {\n            if (typeof pos.coords[i] === 'number') {\n                data[i] = pos.coords[i];\n            }\n        }\n\n        return data;\n    },\n\n    _handleAccuratePositionProgress: function (pos) {\n        var data = this._prepareAccuratePositionData(pos);\n        this.fire('accuratepositionprogress', data);\n    },\n\n    _handleAccuratePositionResponse: function (pos) {\n        var data = this._prepareAccuratePositionData(pos);\n        this.fire('accuratepositionfound', data);\n    },\n\n    _handleAccuratePositionError: function (error) {\n        var c = error.code,\n            message = error.message ||\n                (c === 1 ? 'permission denied' :\n                    (c === 2 ? 'position unavailable' : 'timeout'));\n\n        this._cleanUpAccuratePositioning();\n\n        this.fire('accuratepositionerror', {\n            code: c,\n            message: 'Geolocation error: ' + message + '.'\n        });\n    }\n});\nconsole.log(\"Find accurate position script loaded\");"]}