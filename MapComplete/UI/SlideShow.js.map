{"version":3,"sources":["UI/UIElement.ts","UI/UIEventSource.ts","UI/Base/FixedUiElement.ts","UI/SlideShow.ts"],"names":[],"mappings":";;;;;;;AAGA,ACHA,IDGA,ACHA,SDGA,ICHA;ADGA,ACHA;ADGA,ACHA,YDGA,ACHA;ADYI,ACPA,WDOA,ACPA,SDOA,CAAsB,GCPtB,CAAY,EDOZ,EAAgD,ACPhD,EAAmB;ADKX,ACPA,SDOA,ACPA,UAAA,EDOA,CCPa,EDOE,ACPf,KDOA;AAGJ,ACPA,SDOK,ACPA,EDOL,ECPA,CDOU,ECPE,IAAZ,UDO0B,SAAS,CAAC,MAApC;AACA,ACPH,SDOQ,OAAL,GAAe,MAAf;AACA,IAAA,SAAS,CAAC,MAAV;AACA,ACNG,EAAA,ODME,MCNF,CAAA,CDMH,CAAc,MAAd,CCNG,CAAA,WAAA,GAAP,UAAmB,QAAnB,EAAuD;ADOtD,ACNG,SAAK,UAAL,CAAgB,IAAhB,CAAqB,QAArB;;ADSM,ACRN,EDQM,SAAA,ACRC,CDQD,GCRN,MDQM,CAAA,QAAA,GAAV,UAAmB,MAAnB,EAA6C;AACzC,ACRH,GAHM,KDWC,MAAM,KAAK,SAAf,EAA0B;AACtB;AACH,ACRE,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAAmB;AACf,QAAI,KAAK,IAAL,KAAc,CAAlB,EAAqB;ADQrB,ACPI,QDOE,IAAI,GAAG,IAAb;AACA,ACPC,IDOD,MAAM,CAAC,WAAP,CAAmB,YAAA;AACf,MAAA,IAAI,CAAC,MAAL;AACH,ACRD,KDMA,ICNK,IAAL,GAAY,CAAZ;ADSH,ACRG,GDAM,MCAD,IAAL;AACH,GANM;ADiBA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAA8B;AAC1B,ACVG,EAAA,ODUE,MCVF,CAAA,CDUH,GAAgB,CAAhB,ICVG,CAAA,IAAA,GAAP,YAAA;ADWI,ACVA,SDUK,ACVkB,IAAA,EDUvB,ACVuB,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,UAA5B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;ADWxC,ACXK,UAAM,CDWJ,IAAP,GCXmB,GAAA,EAAA,CAAA,EAAA,CAAd;ACxBb,ACAA,AHoCK,ACXO,GDOD,CEhCX,ACAA,EFyBY,QAAQ,CCzBpB,ACAA,AFyBqB,GCzBrB,ACAA,EFyB0B,IAAN,CCzBpB,ACAA,AFyBY,CCzBZ,ACAA,aAAA,CDAA,ACAA,CDAA;AD0BS;ACxBT,ACDA,AHqCI,ACXC,EDWD,CCfO,CCrBX,ACDA,OHqCI,CAAA,MEpCJ,CCDA,EHqCI,CGrCJ,AHqCI,MAAA,CGrCJ,CAAA,CHqCI,YAAA,IGrCJ,CAAA;ADCA,AFqCQ,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,KAAK,EAA7B,CAAd;AErCR,ACAA,AF2BW,EAAA,EE3BX,MDAA,KD2BW,CC3BX,AD2BW,EC3BX,ECAA,GAAA,EF2BW,CAAA,GAAA,CE3BX,CAAA,CF2BI,UAAc,CAAd,EAA2B,SE3B/B,CAAA;ADAoC,AFsC5B,ACVA,EC5B4B,MFsCxB,ACVE,GC5BsB,CAAA,AD4BlB,GDUC,ACVE,IAAb,CDUgB,IAAZ,EEtCwB,EAAA,AFsCJ,MEtCI,CAAA,AFsCG,KAAK,SAApC,EAA+C;AGpCvD,AHqCY,ACVJ,IE3BR,KF2Ba,IE3Bb,OF2BQ,CAAiB,YAAA;AC1BrB,ACDJ,AHsCY,ACVA,MAAA,KC3BR,ID2BiB,CAAC,OAAV,CAAkB,CC3B1B,AD2B2B,CC3Bf,AD2BgB,IC3B5B,AD2BgC,CAAC,CC3BT,GD2BG,CAAnB;AC3BR,ACDJ,AHuCS,ACVG,MAAA,EC5BR,ECDJ,GDCI,ED4BiB,CC3Bb,ACFR,AF6BsB,EE7BtB,EF6BY,EC3BJ,CAAA,IAAA,CAAA,IAAA,EAAM,SAAN,KAAgB,IADpB;ACD2B,AF8BtB,EE9BsB,GF2BvB,ME3BuB,CAAA,SAAA,EAAA,MAAA,CAAA;ADGvB,AFsCA,ACVA,IC5BA,AFsCA,ICVM,CC5BF,CAAC,CFsCE,CAAC,GEtCR,ED4Be,CC5BF,ED4BK,CDUlB,CEtCA,EFsCoB,ACVE,KDUG,QCVP,CACd,CAAC,CDSe,ACTd,EDSN,GCTW,IAAN,CADa,CAAlB;AEtBJ,AF0BI,WE1BJ,AF0BW,SE1BX,AF0BI,CEzBA,gBADJ,EAEI,QAFJ,EAEuB;ADPtB,ACKD,AHiCI,ACLH,GAZM,KEhBP,AHiCQ,KGjCR,AHiCa,GG9BT,MAAA,CAAA,EH8BA,EG9BA,AH8BuB,CG9BvB,IAAA,EAAM,gBAAN,KAAuB,IAH3B;AHkCQ,UAAI,OAAO,CAAC,SAAR,KAAsB,EAA1B,EAA8B;AErC5B,ACFO,AHwCL,ACJhB,EClCc,ECFO,IHwCL,CGxCK,AFoCrB,CEpCqB,KHwCE,CEtCT,AFsCU,CEtCV,KDkCd,CEpCqB,GDEP,ACF8C,CDE9C,EFsCE,CGxCgD,AHwC1B,KAAtB,CAA4B,EEtC9B,GAAV,EFsCY,EGxCgD,CAAA,AHwCV,MAAtC,CEtCZ,MCFwD,CAA0B,CAA1B,CAAvC;ADGb,ACMA,AHgCK,ACjDb,CAAA,EAAA,CEiBQ,GH8BI,EG9BA,CAAC,CDNE,EFsCI,GEtCC,KAAZ,MCMA,GAAyB,gBAAzB;ADLH,AFsCW,GExCF,KFwCE,OAAO,CAAC,aAAR,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,SAAtC;AGhCR,AHiCK,ACnDA,IEkBL,GFlBK,CAAA,CEkBD,CAAC,QAAL,CAAc,EFlBT,GEkBa,AFlBb,CEkBc,YFlBd,CEkBL;ADHR,AFqCS,SErCT,cAAA;AAbA,ACiBQ,CDjBR,CAAoC,ECiB5B,KAAI,CAAC,GDjBuB,CAAA,KCiB5B,GAAiB,CDjBzB,CAAA,MCiBQ;AAEA,AHiCA,QGjCM,AHiCF,IGjCM,CHiCD,EGjCI,KAAb,CHiCI,KAAkB,SAAtB,EAAiC;AEpD5B,ACoBL,AHiCI,IGjCJ,GDpBK,CAAA,CCoBD,CAAC,AHiCK,KGjCV,CHiCc,EGjCD,CHiCI,GErDZ,ACoBY,CHiCb,EErDC,aCoBY,CDpBZ,ACoBY,cAAJ,CAAmB,8BAC5B,2BAD4B,GAE5B,sDAF4B,GAG5B,QAHS,EAIR,OAJQ,CAIA,YAAA;AACL,UAAM,OAAO,GAAG,IAAI,CAAC,aAAL,CAAmB,IAAnC;AACA,AH4BJ,MG5BI,AH4BJ,IG5BQ,CAAC,EH4BF,CAAC,GG5BJ,CAAY,GH4BhB,GAAkB,CG5BK,GAAG,CAAtB,OH4Bc;AG3BjB,AH4BG,KGnCK,CAAb,EHmCQ,MAAI,CAAC,QAAL;AG3BR,AH4BK,IG5BL,GH0BI,EG1BA,CAAC,KAAL,GAAa,IAAI,gBAAA,CAAA,cAAJ,CAAmB,8BAC5B,2BAD4B,GAE5B,uD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","file":"SlideShow.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\nimport {Playground} from \"../Layers/Playground\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    protected ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = () => {\n                self._onClick();\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J)): UIEventSource<J> {\n        const self = this;\n        this.addCallback(function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        });\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n\n        return newSource;\n\n    }\n\n\n}","import {UIElement} from \"../UIElement\";\n\nexport class FixedUiElement extends UIElement {\n    private _html: string;\n\n    constructor(html: string) {\n        super(undefined);\n        this._html = html;\n    }\n\n    protected InnerRender(): string {\n        return this._html;\n    }\n\n\n}","import {UIElement} from \"./UIElement\";\nimport {UIEventSource} from \"./UIEventSource\";\nimport {FixedUiElement} from \"./Base/FixedUiElement\";\n\nexport class SlideShow extends UIElement {\n\n    private readonly _embeddedElements: UIEventSource<UIElement[]>\n\n    private readonly _currentSlide: UIEventSource<number> = new UIEventSource<number>(0);\n    private readonly _noimages: UIElement;\n    private _prev: FixedUiElement;\n    private _next: FixedUiElement;\n\n    constructor(\n        embeddedElements: UIEventSource<UIElement[]>,\n        noImages: UIElement) {\n        super(embeddedElements);\n        this._embeddedElements = embeddedElements;\n        this.ListenTo(this._currentSlide);\n        this._noimages = noImages;\n\n        const self = this;\n        this._prev = new FixedUiElement(\"<div class='prev-button'>\" +\n            \"<div class='vspan'></div>\" +\n            \"<img src='assets/arrow-left-smooth.svg' alt='Prev'/>\" +\n            \"</div>\")\n            .onClick(() => {\n                const current = self._currentSlide.data;\n                self.MoveTo(current - 1);\n            });\n        this._next = new FixedUiElement(\"<div class='next-button'>\" +\n            \"<div class='vspan'></div>\" +\n            \"<img src='assets/arrow-right-smooth.svg' alt='Next'/>\" +\n            \"</div>\")\n            .onClick(() => {\n                const current = self._currentSlide.data;\n                self.MoveTo(current + 1);\n            });\n\n    }\n\n    protected InnerRender(): string {\n        if (this._embeddedElements.data.length == 0) {\n            return this._noimages.Render();\n        }\n\n        if (this._embeddedElements.data.length == 1) {\n            return \"<div class='image-slideshow'><div class='slides'><div class='slide'>\" +\n                this._embeddedElements.data[0].Render() +\n                \"</div></div></div>\";\n        }\n\n\n        let slides = \"\"\n        for (let i = 0; i < this._embeddedElements.data.length; i++) {\n            let embeddedElement = this._embeddedElements.data[i];\n            let state = \"hidden\"\n            if (this._currentSlide.data === i) {\n                state = \"active-slide\";\n            }\n            slides += \"      <div class=\\\"slide \" + state + \"\\\">\" + embeddedElement.Render() + \"</div>\\n\";\n        }\n        return \"<div class='image-slideshow'>\"\n            + this._prev.Render()\n            + \"<div class='slides'>\" + slides + \"</div>\"\n            + this._next.Render()\n            + \"</div>\";\n    }\n\n    public MoveTo(index: number) {\n        if (index < 0) {\n            index = this._embeddedElements.data.length - 1;\n        }\n        index = index % this._embeddedElements.data.length;\n        this._currentSlide.setData(index);\n    }\n\n    InnerUpdate(htmlElement) {\n        this._next.Update();\n        this._prev.Update();\n    }\n\n    Activate() {\n        for (const embeddedElement of this._embeddedElements.data) {\n            embeddedElement.Activate();\n        }\n    }\n\n}"]}