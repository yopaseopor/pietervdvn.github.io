{"version":3,"sources":["UI/UIElement.ts","UI/UIEventSource.ts","UI/Base/FixedUiElement.ts","UI/SlideShow.ts"],"names":[],"mappings":";;;;;;;AAEA,ACFA,IDEA,ACFA,SDEA,ICFA;ADEA,ACFA;ADEA,ACFA,YDEA,ACFA;ADWI,ACNA,WDMA,ACNA,SDMA,CAAsB,GCNtB,CAAY,EDMZ,EAAgD,ACNhD,EAAmB;ADIX,ACNA,SDMA,ACNA,UAAA,EDMA,CCNa,EDME,ACNf,KDMA;AAGJ,ACNA,SDMK,ACNA,EDML,ECNA,CDMU,ECNE,IAAZ,UDM0B,SAAS,CAAC,MAApC;AACA,ACNH,SDMQ,OAAL,GAAe,MAAf;AACA,IAAA,SAAS,CAAC,MAAV;AACA,ACLG,EAAA,ODKE,MCLF,CAAA,CDKH,CAAc,MAAd,CCLG,CAAA,WAAA,GAAP,UAAmB,QAAnB,EAAuD;ADMtD,ACLG,SAAK,UAAL,CAAgB,IAAhB,CAAqB,QAArB;;ADQG,ACPH,EDOG,SAAA,ACPI,CDOJ,GCPH,MDOG,CAAA,QAAA,GAAP,UAAgB,MAAhB,EAA0C;AACtC,ACPH,GAHM,KDUC,MAAM,KAAK,SAAf,EAA0B;AACtB;AACH,ACPE,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAAmB;AACf,QAAI,KAAK,IAAL,KAAc,CAAlB,EAAqB;ADOrB,ACNI,QDME,IAAI,GAAG,IAAb;AACA,ACNC,IDMD,MAAM,CAAC,WAAP,CAAmB,YAAA;AACf,MAAA,IAAI,CAAC,MAAL;AACH,ACPD,KDKA,ICLK,IAAL,GAAY,CAAZ;ADQH,ACPG,GDDG,MCCE,IAAL;AACH,GANM;ADgBA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAA8B;AAC1B,ACTG,EAAA,ODSE,MCTF,CAAA,CDSH,GAAgB,CAAhB,ICTG,CAAA,IAAA,GAAP,YAAA;ADUI,ACTA,SDSK,ACTkB,IAAA,EDSvB,ACTuB,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,UAA5B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;ADUxC,ACVK,UAAM,CDUJ,IAAP,GCVmB,GAAA,EAAA,CAAA,EAAA,CAAd;ACxBb,ACAA,AHmCK,ACVO,GDMD,CE/BX,ACAA,EFyBY,QAAQ,CCzBpB,ACAA,AFyBqB,GCzBrB,ACAA,EFyB0B,IAAN,CCzBpB,ACAA,AFyBY,CCzBZ,ACAA,aAAA,CDAA,ACAA,CDAA;AD0BS;ACxBT,ACDA,AHoCI,ACVC,EDUD,CCdO,CCrBX,ACDA,OHoCI,CAAA,MEnCJ,CCDA,EHoCI,CGpCJ,AHoCI,MAAA,CGpCJ,CAAA,CHoCI,YAAA,IGpCJ,CAAA;ADCA,AFoCQ,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,KAAK,EAA7B,CAAd;AEpCR,ACAA,AF2BW,EAAA,EE3BX,MDAA,KD2BW,CC3BX,AD2BW,EC3BX,ECAA,GAAA,EF2BW,CAAA,GAAA,CE3BX,CAAA,CF2BI,UAAc,CAAd,EACc,SE5BlB,CAAA,EF2BI,EACsD;AC5BtB,AFqC5B,ACTU,EC5BkB,MFqCxB,ACTM,GC5BkB,CAAA,GFqCjB,KAAK,ACTN,IDSN,CCTM,CC5BkB,EAAA,AFqCJ,ECTd,CAAA,EAAA,CC5BkB,CAAA,AFqCG,KAAK,SAApC,EAA+C;AGnCvD,AHoCY,ACVM,IE1BlB,EF0BkB,OE1BlB,KF0BkB,GAAA,EAAA;ACzBd,ACDJ,AHqCY,ACX8C,WCzBtD,cAAA,CAAY,IAAZ,EAAwB;AAAxB,ACDJ,AHsCS,QErCL,ECDJ,GDCI,GACI,ACFR,EAAA,IDEQ,CAAA,IAAA,CAAA,IAAA,EAAM,SAAN,KAAgB,IADpB;ACD2B,AF2BvB,EE3BuB,MF2BjB,GE3BiB,CAAA,AF2Bb,GAAG,IAAb,EE3BuB,EAAA,MAAA,CAAA;ADGvB,AFqCA,IErCA,AFqCA,KErCI,CAAC,CFqCE,CAAC,GErCR,GAAa,GFqCb,CErCA,EFqCoB,KAAK,WAAL,EAApB;AG/BJ,AFoBI,QAAM,GEpBV,GFoBgB,GAAG,GEpBnB,CACI,KFmBM,MAAS,GAAA,EEpBnB,EAEI,QAFJ,EAEuB;ADPtB,ACKD,AHgCI,ACXI,MAAA,EErBR,AHgCQ,KGhCR,AHgCa,ECXI,CElBb,AFkBc,MElBd,CAAA,AFkBI,CAAkB,CDWtB,ACXuB,CAAC,CElBxB,AH6BuB,CG7BvB,EFkB4B,CAAC,CElB7B,EAAM,CFkBiB,CAAnB,cElBJ,KAAuB,IAH3B;AHiCQ,ACXA,MAAA,IDWI,KCXK,CAAC,CDWC,CAAC,ECXZ,ODWI,KAAsB,EAA1B,EAA8B;AEpC5B,ACFM,AHuCJ,ACXP,EC1BK,ECFM,CFyBZ,GDcQ,CGvCI,CAAA,KHuCG,CErCT,AFqCU,CErCV,MCFM,GDEN,ACF6C,CDE7C,EFqCE,CGvC+C,AHuCzB,KAAtB,CAA4B,EErC9B,GAAV,EFqCY,EGvC+C,CAAA,AHuCT,MAAtC,CErCZ,MCFuD,CAA0B,CAA1B,CAAvC;ADGZ,ACMA,AH+BK,IG/BL,GH6BI,EG7BA,CAAC,CDNE,EFqCI,GErCC,KAAZ,MCMA,GAAyB,gBAAzB;ADLH,AFqCW,ACXR,GC5BM,KFuCE,CCXH,MDWU,CAAC,ICXhB,CAAiB,MAAjB,EDWQ,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,SAAtC;AG/BR,AHgCK,IGhCL,KAAI,CAAC,QAAL,CAAc,KAAI,CAAC,aAAnB;ADHR,AFoCS,ACZD,SCxBR,ADwBkC,IAAA,EAAA,GAAA,CAAA,EAAA,ECxBlC,YDwBkC,GAAA,YAA1B,EAA0B,EAAA,GAAA,cAAA,CAAA,MAA1B,EAA0B,EAAA,EAA1B,EAAwC;ACrChD,ACiBQ,AFoBK,CCrCb,CAAoC,ECiB5B,KAAI,CAAC,AFoBM,GCrCiB,CAAA,KCiB5B,EFoBsB,CEpBL,CDjBzB,CAAA,ADqC8B,MEpBtB,QFoBsB,CAAA,EAAA,CAAjB;AElBL,AHgCA,ACbI,MAAA,EEnBE,AHgCF,IGhCM,CHgCD,EGhCI,EFmBE,CAAC,EEnBhB,CHgCI,KAAkB,GCblB,CAAwB,KDa5B,CCbI,CDa6B;AEnD5B,ACoBL,AHgCI,ACbH,IEnBD,GDpBK,CAAA,CCoBD,CAAC,AHgCK,KGhCV,CHgCc,EGhCD,CHgCI,GEpDZ,ACoBY,CHgCb,EEpDC,aCoBY,CDpBZ,ACoBY,cAAJ,CAAmB,8BAC5B,2BAD4B,GAE5B,sDAF4B,GAG5B,QAHS,EAIR,OAJQ,CAIA,YAAA;AACL,UAAM,OAAO,GAAG,IAAI,CAAC,aAAL,CAAmB,IAAnC;AACA,AH2BJ,ACbJ,MEdQ,AH2BJ,ECbE,EEdM,CAAC,EH2BF,CAAC,GG3BJ,AFcO,CEdK,EFcF,CDad,GAAkB,ACbA,CEdK,GAAG,CAAtB,OH2Bc,CCbJ,CACd,CAAC,CAAC,KAAK,IAAN,CADa,CAAlB;AEbK,AH2BG,ACTR,KEzBa,CAAb,EHkCQ,GCTD,GDSK,CAAC,KCTb,GDSQ;AG1BR,AH2BK,ACRR,GApBM,CECH,GHyBI,EGzBA,CAAC,KAAL,GAAa,IAAI,gBAAA,CAAA,cAAJ,CAAmB,8BAC5B,2BAD4B,GAE5B,uDAF4B,GAG5B,QAHS,EAIR,OAJQ,CAIA,YAAA;AACL,UAAM,OAAO,GAAG,IAAI,CAAC,aAAL,CAAmB,IAAnC;AACA,AHsBJ,ACNZ,MEhBgB,AHsBJ,GCNZ,CEhBoB,CAAC,EHsBF,CAAC,GGtBJ,CAAY,CHsBhB,CAAc,ECN1B,GEhBmC,GAAG,CAAtB,IHsBJ,GAA8B,KAA9B;AGrBC,AHsBD,AC3DZ,CAAA,EAAA,EE8BqB,CAAb,AH6BI,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,SAAvB;AACD;AGrBN,AFvCQ,OAAA,CAAA,aAAA,GAAA,aAAA;;AEyCC,EAAA,SAAA,CAAA,SAAA,CAAA,WAAA,GAAV,YAAA;AACI,QAAI,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,MAA5B,IAAsC,CAA1C,EAA6C;AACzC,aAAO,KAAK,SAAL,CAAe,MAAf,EAAP;AACH;;AAED,QAAI,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,MAA5B,IAAsC,CAA1C,EAA6C;AACzC,aAAO,yEACH,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,CAA5B,EAA+B,MAA/B,EADG,GAEH,oBAFJ;AAGH;AHqBA;AGlBD,QAAI,MAAM,GAAG,EAAb;AHoBA,SAAK,WAAL,CAAiB,OAAjB;AGnBA,AHoBH,GArCD,MGiBS,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,MAAhD,EAAwD,CAAC,EAAzD,EAA6D;AACzD,UAAI,eAAe,GAAG,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,CAA5B,CAAtB;AACA,AHoBR,EAAA,QGpBY,CHoBZ,CAAA,GGpBiB,GAAG,GHoBpB,CAAA,IGpBQ,OHoBR,GAAA,UAAY,IAAZ,EAA0B;AACtB,SAAK,YAAL,GAAoB,IAApB;AGpBI,AHqBJ,SAAK,CGrBG,KAAK,AHqBb,aGrBQ,CAAmB,IAAnB,KAA4B,CAAhC,EAAmC;AAC/B,AHqBR,QGrBQ,GHqBD,EGrBM,EHqBb,CGrBgB,cAAR;AACH,AHqBR,GAJD,CA1EJ,CAgFI;;AGtBQ,MAAA,MAAM,IAAI,8BAA8B,KAA9B,GAAsC,KAAtC,GAA8C,eAAe,CAAC,MAAhB,EAA9C,GAAyE,UAAnF;AACH,AHsBL,EAAA,SAAA,CAAA,SAAA,CAAA,WAAA,GAAA,UAAY,WAAZ,EAAqC,CAAG,CAAxC;;AGrBI,AHuBJ,EAAA,SGvBW,AHuBX,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA,EGtBU,KAAK,KAAL,CAAW,MAAX,EADC,GAED,sBAFC,GAEwB,MAFxB,GAEiC,QAFjC,GAGD,KAAK,KAAL,CAAW,MAAX,EAHC,GAID,QAJN;AAKH,AHmBG,GG7CM,QH6CC,iCAAiC,KAAK,EAAtC,GAA2C,IAA3C,GAAkD,KAAK,WAAL,EAAlD,GAAuE,SAA9E;AACH,GAFD;AGhBO,EAAA,SAAA,CAAA,SAAA,CAAA,MAAA,GAAP,UAAc,KAAd,EAA2B;AACvB,AHmBJ,EAAA,MGnBQ,GHmBR,CAAA,CGnBa,GAAG,CAAZ,EAAe,EHmBnB,CAAA,QAAA,GAAA,UAAS,KAAT,EAAsB;AGlBd,AHmBJ,MGnBI,EHmBA,GGnBK,GAAG,CHmBD,GAAG,CGnBG,OHmBK,CAAC,SGnBX,CAAuB,IAAvB,AHmBE,CGnB0B,AHmBF,KAAxB,CGnBF,AHmBZ,GGnBiD,CAA7C;AACH;AHmBD,QAAG,OAAO,KAAK,IAAf,EAAoB;AGlBpB,AHmBI,IGnBJ,EHmBI,GGnBC,GAAG,CHmBG,CAAC,GGnBC,AHmBT,CAAY,EGnBA,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,MAA5C,IHmBI,EAAsD,KAAtD;AACA;AGnBJ,AHoBC,SGpBI,aAAL,CAAmB,OAAnB,CAA2B,KAA3B;AACH,GANM;AH0BH,IAAA,OAAO,CAAC,SAAR,GAAoB,KAAK,MAAL,EAApB;AGlBJ,AHmBI,EGnBJ,OHmBS,EGnBT,CAAA,GHmBI,MGnBJ,CAAA,WAAA,GAAA,UAAY,WAAZ,EAAuB;AACnB,AHmBA,SGnBK,EHmBE,GGnBP,CAAW,AHmBX,MGnBA;AHoBH,GATD;AGVI,SAAK,KAAL,CAAW,MAAX;AACH,AHqBM,EAAA,CGxBP,QHwBO,CAAA,SAAA,CAAA,QAAA,GAAP,YAAA,CAA0B,CAAnB;;AGnBP,AHmB0B,EGnB1B,SAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACI,SAA8B,IAAA,EAAA,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,iBAAL,CAAuB,IAArD,EAA8B,EAAA,GAAA,EAAA,CAAA,MAA9B,EAA8B,EAAA,EAA9B,EAA2D;AAAtD,AHoBF,EAAA,QGpBQ,CHoBR,CAAA,SAAA,CAAA,GGpBuB,GAAA,CHoBvB,CGpBuB,CAAA,CHoB9B,CGpB8B,CAArB,UHoBT;AGnBQ,AHoBJ,MGpBI,KHoBG,KAAK,KGpBO,CAAC,KHoBb,GGpBH,IHoB0B,EAA9B;AGnBC,AHoBJ,GAFM;;AGjBH,AHlFW,EAAA,OGkFN,EHlFM,CAAA,EGkFX,CAAW,GHlFA,GGkFX,AHlF4B,CAAjB;AAuGnB,SAAA,SAAA;AGpBQ,AHrFR,CAAA,EAAA,MGqFa,KAAL,CAAW,MAAX;AACH,GAND;AHhFkB,OAAA,CAAA,SAAA,GAAA,SAAA;AGwFtB,SAAA,SAAA;AAtFA,CAAA,CAA+B,WAAA,CAAA,SAA/B,CAAA;;AAAa,OAAA,CAAA,SAAA,GAAA,SAAA","file":"SlideShow.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    public ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = () => {\n                self._onClick();\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n           /*\n            const childs = element.children;\n            for (let i = 0; i < childs.length; i++) {\n                const ch = childs[i];\n                console.log(ch);\n                ch.style.cursor = \"pointer\";\n                ch.onclick = () => {\n                    self._onClick();\n                }\n                ch.style.pointerEvents = \"all\";\n            }*/\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J),\n                  extraSources : UIEventSource<any>[] = []): UIEventSource<J> {\n        const self = this;\n        \n        const update = function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        }\n        \n        this.addCallback(update);\n        for (const extraSource of extraSources) {\n            extraSource.addCallback(update);\n        }\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n        \n\n        return newSource;\n\n    }\n\n\n}","import {UIElement} from \"../UIElement\";\n\nexport class FixedUiElement extends UIElement {\n    private _html: string;\n\n    constructor(html: string) {\n        super(undefined);\n        this._html = html;\n    }\n\n    protected InnerRender(): string {\n        return this._html;\n    }\n\n\n}","import {UIElement} from \"./UIElement\";\nimport {UIEventSource} from \"./UIEventSource\";\nimport {FixedUiElement} from \"./Base/FixedUiElement\";\n\nexport class SlideShow extends UIElement {\n\n    private readonly _embeddedElements: UIEventSource<UIElement[]>\n\n    public readonly _currentSlide: UIEventSource<number> = new UIEventSource<number>(0);\n    private readonly _noimages: UIElement;\n    private _prev: FixedUiElement;\n    private _next: FixedUiElement;\n\n    constructor(\n        embeddedElements: UIEventSource<UIElement[]>,\n        noImages: UIElement) {\n        super(embeddedElements);\n        this._embeddedElements = embeddedElements;\n        this.ListenTo(this._currentSlide);\n        this._noimages = noImages;\n\n        const self = this;\n        this._prev = new FixedUiElement(\"<div class='prev-button'>\" +\n            \"<div class='vspan'></div>\" +\n            \"<img src='assets/arrow-left-smooth.svg' alt='Prev'/>\" +\n            \"</div>\")\n            .onClick(() => {\n                const current = self._currentSlide.data;\n                self.MoveTo(current - 1);\n            });\n        this._next = new FixedUiElement(\"<div class='next-button'>\" +\n            \"<div class='vspan'></div>\" +\n            \"<img src='assets/arrow-right-smooth.svg' alt='Next'/>\" +\n            \"</div>\")\n            .onClick(() => {\n                const current = self._currentSlide.data;\n                self.MoveTo(current + 1);\n            });\n\n    }\n\n    protected InnerRender(): string {\n        if (this._embeddedElements.data.length == 0) {\n            return this._noimages.Render();\n        }\n\n        if (this._embeddedElements.data.length == 1) {\n            return \"<div class='image-slideshow'><div class='slides'><div class='slide'>\" +\n                this._embeddedElements.data[0].Render() +\n                \"</div></div></div>\";\n        }\n\n\n        let slides = \"\"\n        for (let i = 0; i < this._embeddedElements.data.length; i++) {\n            let embeddedElement = this._embeddedElements.data[i];\n            let state = \"hidden\"\n            if (this._currentSlide.data === i) {\n                state = \"active-slide\";\n            }\n            slides += \"      <div class=\\\"slide \" + state + \"\\\">\" + embeddedElement.Render() + \"</div>\\n\";\n        }\n        return \"<div class='image-slideshow'>\"\n            + this._prev.Render()\n            + \"<div class='slides'>\" + slides + \"</div>\"\n            + this._next.Render()\n            + \"</div>\";\n    }\n\n    public MoveTo(index: number) {\n        if (index < 0) {\n            index = this._embeddedElements.data.length - 1;\n        }\n        index = index % this._embeddedElements.data.length;\n        this._currentSlide.setData(index);\n    }\n\n    InnerUpdate(htmlElement) {\n        this._next.Update();\n        this._prev.Update();\n    }\n\n    Activate() {\n        for (const embeddedElement of this._embeddedElements.data) {\n            embeddedElement.Activate();\n        }\n        this._next.Update();\n        this._prev.Update();\n    }\n\n}"]}