{"version":3,"sources":["UI/UIElement.ts","UI/UIEventSource.ts","UI/Base/FixedUiElement.ts","UI/Base/VariableUIElement.ts","UI/ConfirmDialog.ts"],"names":[],"mappings":";;;;;;;AAEA,ACFA,IDEA,ACFA,SDEA,ICFA;ADEA,ACFA;ADEA,ACFA,YDEA,ACFA;ADWI,ACNA,WDMA,ACNA,SDMA,CAAsB,GCNtB,CAAY,EDMZ,EAAgD,ACNhD,EAAmB;ADIX,ACNA,SDMA,ACNA,UAAA,EDMA,CCNa,EDME,ACNf,KDMA;AAGJ,ACNA,SDMK,ACNA,EDML,ECNA,CDMU,ECNE,IAAZ,UDM0B,SAAS,CAAC,MAApC;AACA,ACNH,SDMQ,OAAL,GAAe,MAAf;AACA,IAAA,SAAS,CAAC,MAAV;AACA,ACLG,EAAA,ODKE,MCLF,CAAA,CDKH,CAAc,MAAd,CCLG,CAAA,WAAA,GAAP,UAAmB,QAAnB,EAAuD;ADMtD,ACLG,SAAK,UAAL,CAAgB,IAAhB,CAAqB,QAArB;;ADQG,ACPH,EDOG,SAAA,ACPI,CDOJ,GCPH,MDOG,CAAA,QAAA,GAAP,UAAgB,MAAhB,EAA0C;AACtC,ACPH,GAHM,KDUC,MAAM,KAAK,SAAf,EAA0B;AACtB;AACH,ACPE,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAAmB;AACf,QAAI,KAAK,IAAL,KAAc,CAAlB,EAAqB;ADOrB,ACNI,QDME,IAAI,GAAG,IAAb;AACA,ACNC,IDMD,MAAM,CAAC,WAAP,CAAmB,YAAA;AACf,MAAA,IAAI,CAAC,MAAL;AACH,ACPD,KDKA,ICLK,IAAL,GAAY,CAAZ;ADQH,ACPG,GDDG,MCCE,IAAL;AACH,GANM;ADgBA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAA8B;AAC1B,ACTG,EAAA,ODSE,MCTF,CAAA,CDSH,GAAgB,CAAhB,ICTG,CAAA,IAAA,GAAP,YAAA;ADUI,ACTA,SDSK,ACTkB,IAAA,EDSvB,ACTuB,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,UAA5B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;ADUxC,ACVK,UAAM,CDUJ,IAAP,GCVmB,GAAA,EAAA,CAAA,EAAA,CAAd;ACxBb,ACAA,ACAA,AJmCK,ACVO,GDMD,CE/BX,ACAA,ACAA,EHyBY,QAAQ,CCzBpB,ACAA,ACAA,AHyBqB,GCzBrB,ACAA,ACAA,EHyB0B,IAAN,CCzBpB,ACAA,ACAA,AHyBY,CCzBZ,ACAA,ACAA,aAAA,CFAA,ACAA,ACAA,CFAA,ACAA;AF0BS;ACxBT,ACCA,ACFA,AJoCI,ACVC,EDUD,CCdO,CCrBX,ACCA,ACFA,OJoCI,CAAA,MEnCJ,CEDA,EDEA,AHkCI,CIpCJ,AJoCI,MAAA,CIpCJ,CAAA,CJoCI,YAAA,IIpCJ,CAAA;AFCA,ACCA,AHmCQ,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,KAAK,EAA7B,CAAd;AEpCR,ACCA,ACDA,AH2BW,EAAA,EG3BX,MFAA,ACCA,KF0BW,CC3BX,ACCA,AF0BW,EC3BX,ACCA,ECDA,GAAA,EH2BW,CAAA,GAAA,CG3BX,CAAA,CH2BI,UAAc,CAAd,EACc,SG5BlB,CAAA,EH2BI,EACsD;AC5BtB,ACCG,AHoC/B,ACTU,EC5BkB,ACCG,MHoC3B,ACTM,GC5BkB,ACCG,CDDH,ACCG,GHoCpB,KAAK,ACTN,IDSN,CCTM,CC5BkB,EAAA,AFqCJ,CGpCO,CF2BrB,CE3BqB,AF2BrB,EAAA,CC5BkB,CAAA,AFqCG,EGpCA,CAAA,EHoCK,SAApC,EAA+C;AIpCvD,AJqCY,ACVM,IG3BlB,EH2BkB,YAAA,GAAA,EG3BlB,AH2BkB,GG3BlB,OAAA,CAAA,0BAAA,CAAA;AFEI,ACEA,AHkCQ,ACX8C,WCzBtD,ACEA,cDFA,CAAY,ECEZ,CAAY,CDFZ,EAAwB,CCExB,EAAyC,WAAzC,EAAwG;ADFxG,ACEyC,ACD7C,AJoCS,IIpCT,IFDI,ACEyC,KDFzC,GACI,CEAR,EDC6C,GDDrC,CAAA,CCCqC,GDDrC,CAAA,CCCqC,CAAA,EDDrC,ACCqC,EDD/B,SAAN,KAAgB,IADpB;ACEyC,ACD7C,AHyBQ,MExBqC,EFwB/B,IAAI,GAAG,EExBwB,EFwBrC,CExBqC,SAAA;ADArC,ACAoG,ACD5G,AJsCQ,IErCA,AFqCA,KErCI,CAAC,AEDb,CJsCe,CAAC,GErCR,CEDR,EFCqB,AEDrB,GJsCQ,CErCA,EFqCoB,KAAK,WAAL,EAApB;AItC2B,AH2B3B,EG3B2B,MH2BrB,GG3BqB,CAAA,EH2Bf,GAAG,QG3BY,CH2BrB,CG3BqB,KH2BZ,CG3BY,CAAA,CH2BZ;ACzBlB,ACDD,AHsCI,ACXI,MAAA,EE3BR,AHsCQ,KGtCR,AHsCa,ECXI,CE1Bb,AF0Bc,ME1Bd,CAAA,AF0BI,CAAkB,CDWtB,ACXuB,CAAC,CE1BxB,AHqCuB,CGrCvB,EF0B4B,CAAC,CE1B7B,EAAM,CF0BiB,CAAnB,EE1BJ,KAAW,IADf;ACMA,AJiCQ,ACXA,MAAA,IDWI,CIjCZ,IHsBiB,CAAC,CDWC,CAAC,ECXZ,IGtBR,CACI,EJgCQ,EIjCZ,EAEI,CJ+B8B,EAA1B,EAA8B,GIjCtC,EAGI,OAHJ,EAGqB,OAHrB,EAII,QAJJ,EAKI,QALJ,EAMI,MANJ,EAOI,MAPJ,EAOuB;AFVb,ACDN,ACUA,AJ4BQ,ACXP,EC1BK,ECDN,CFwBA,GGdA,AJ4BQ,CGtCJ,CAAC,ICUL,CDVA,AHsCe,CErCT,AFqCU,CErCV,CCDO,CCUb,GDVA,ECUA,CAAA,CFTM,CAAA,AESN,EJ4BQ,CAAsB,KAAtB,CAA4B,EErC9B,GAAV,EFqCY,GAAsC,MAAtC,CErCZ;AACI,ACDA,ACSA,AJ6BK,IGtCL,ECSA,CJ2BI,EGpCA,CAAC,CDCE,CEQP,CJ6BW,EI7BX,CFRY,CEQZ,IFRA,CCDA,GAAoB,WAApB;ADEH,AEOsB,AJ8BX,ACXR,GC5BM,KFuCE,CCXH,MDWU,CAAC,ICXhB,CAAiB,MAAjB,EDWQ,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,SAAtC;AGrCX,AHsCQ;AEnCb,AEKQ,AJ+BC,ACZD,QGnBA,CFLR,ADwBkC,IAAA,CGnB1B,CHmB0B,GAAA,CGnB1B,AHmB0B,EAAA,ECxBlC,CEKQ,CAAA,EAAA,QHmB0B,GAAA,YAA1B,EAA0B,EAAA,GAAA,cAAA,CAAA,MAA1B,EAA0B,EAAA,EAA1B,EAAwC;ACrChD,ACYc,ACMN,AHmBK,CCrCb,CAAoC,ACYtB,ICMN,IHmBW,EGnBX,CFlB4B,CAAA,CEkB5B,EAAA,EDNM,CAAA,CFyBgB,ECrC9B,CAAA,ADqC8B,KEzBhB,CAAA,QFyBgB,CAAA,EEzBhB,AFyBgB,CAAjB,EEzBT,YAAA;AACI,ACKmB,AJiCnB,ACbI,MAAA,EDaA,GGtCG,EHsCE,GGtCG,CFyBG,CAAC,GEzBT,AHsCH,CGtCc,IAAlB,AHsCsB,GCblB,CAAwB,KDa5B,CCbI,CDa6B;AEnD5B,ACcR,AHsCO,ACbH,GE3BK,IDZD,CAAA,EFoDK,MAAI,GAAG,GEpDZ,CFoDD,EEpDC,cAAA;AEWT,QAAA,KAAA,GAQI,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,IAAN,KAAW,IARf;ADKA,AHqCQ,ACbJ,EExBJ,IHqCQ,ECbE,KDaK,CAAC,GCbG,EExBnB,CAAA,AFwBsB,CDad,GAAkB,ACbA,KExB1B,CAAA,MHqC0B,CCbJ,CACd,CAAC,CAAC,CEzBV,GAAA,CFyBe,IAAN,CADa,CAAlB,GExBQ,WAAZ,EAAoC;AAChC,ACZI,AJiDI,ACTR,IE5BA,ACZI,IJiDI,CIjDJ,CDYJ,ACZI,CDYJ,AF4BO,GDSK,CAAC,KGrCb,AF4BA,CE5BM,CCZF,CJiDI,EIjDmC,IAAI,GDY/C,CAAiB,IAAjB,CAAiB,IAAjB,EAAkB,ACZ6B,CAAA,UDY/C,GCZ2C,CAA2B,KAA3B,CAAvC;AJkDC,ACRR,GApBM,ID0BC;AGnCJ,ACEA,IAAA,IDFG,CCEC,CAAC,GDFG,KCER,CAAc,KAAI,CDFf,ACEgB,KDFM,OCEzB,EDFA,EAAmC;AAC/B,AHqCA,ACNZ,MDMY,GCNZ,EE/BiB,EHqCE,CAAC,KAAR,CAAc,ECN1B,CE/BY,CAAkB,SHqClB,EGrCA,CHqC8B,KAA9B;AGpCH,ACCD,AJoCI,AC3DZ,CAAA,EAAA,GD2DY,EIpCE,IAAI,CJoCC,CAAC,CIpCC,IJoCT,CIpCJ,AJoCkB,MAAd,GAAuB,SAAvB;AGpCP,ACCG,AJoCG,GG1CP,CCMI,IAAI,CAAC,WAAL,CAAiB,YAAA;AACb,AHzBC,MGyBD,CHzBC,CAAA,EGyBG,CAAC,UHzBJ,EGyBD,CAAkB,AHzBjB,OGyBD,CAA0B,KAA1B,AHzBC;AE0Bb,ACAS,KAFD,IDER,iBAAA;AAvBA,ACwBQ,CDxBR,CAAuC,ECwB/B,KAAI,CAAC,GDxB0B,CAAA,KCwB/B,GAAiB,CDxBzB,CAAA,ECwB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","file":"ConfirmDialog.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    public ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = () => {\n                self._onClick();\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n           /*\n            const childs = element.children;\n            for (let i = 0; i < childs.length; i++) {\n                const ch = childs[i];\n                console.log(ch);\n                ch.style.cursor = \"pointer\";\n                ch.onclick = () => {\n                    self._onClick();\n                }\n                ch.style.pointerEvents = \"all\";\n            }*/\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J),\n                  extraSources : UIEventSource<any>[] = []): UIEventSource<J> {\n        const self = this;\n        \n        const update = function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        }\n        \n        this.addCallback(update);\n        for (const extraSource of extraSources) {\n            extraSource.addCallback(update);\n        }\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n        \n\n        return newSource;\n\n    }\n\n\n}","import {UIElement} from \"../UIElement\";\n\nexport class FixedUiElement extends UIElement {\n    private _html: string;\n\n    constructor(html: string) {\n        super(undefined);\n        this._html = html;\n    }\n\n    protected InnerRender(): string {\n        return this._html;\n    }\n\n\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\n\nexport class VariableUiElement extends UIElement {\n    private _html: UIEventSource<string>;\n    private _innerUpdate: (htmlElement: HTMLElement) => void;\n\n    constructor(html: UIEventSource<string>, innerUpdate : ((htmlElement : HTMLElement) => void) = undefined) {\n        super(html);\n        this._html = html;\n        this._innerUpdate = innerUpdate;\n\n    }\n\n    protected InnerRender(): string {\n        return this._html.data;\n    }\n    \n    InnerUpdate(htmlElement: HTMLElement) {\n        super.InnerUpdate(htmlElement);\n        if(this._innerUpdate !== undefined){\n            this._innerUpdate(htmlElement);\n        }\n    }\n\n\n}","import {UIElement} from \"./UIElement\";\nimport {UIEventSource} from \"./UIEventSource\";\nimport {FixedUiElement} from \"./Base/FixedUiElement\";\nimport {VariableUiElement} from \"./Base/VariableUIElement\";\n\n\nexport class ConfirmDialog extends UIElement {\n    private _showOptions: UIEventSource<boolean> = new UIEventSource<boolean>(false);\n\n    private _question: UIElement;\n    private _optionA: UIElement;\n    private _optionB: UIElement;\n\n    constructor(\n        show: UIEventSource<boolean>,\n        question: string,\n        optionA: string, optionB: string,\n        executeA: () => void,\n        executeB: () => void,\n        classA: string = \"\",\n        classB: string = \"\") {\n        super(show);\n        this.ListenTo(this._showOptions);\n        const self = this;\n        show.addCallback(() => {\n            self._showOptions.setData(false);\n        })\n        this._question = new FixedUiElement(\"<span class='ui-question'>\" + question + \"</span>\")\n            .onClick(() => {\n                self._showOptions.setData(!self._showOptions.data);\n            });\n        this._optionA = new VariableUiElement(\n            this._showOptions.map(\n                (show) => show ? \"<div class='\" + classA + \"'>\" + optionA + \"</div>\" : \"\"))\n            .onClick(() => {\n                    self._showOptions.setData(false);\n                    executeA();\n                }\n            );\n        this._optionB = new VariableUiElement(\n            this._showOptions.map((show) =>\n                show ? \"<div class='\" + classB + \"'>\" + optionB + \"</div>\" : \"\")        )\n            .onClick(() => {\n                self._showOptions.setData(false);\n                executeB();\n            });\n\n        \n        \n    }\n\n    protected InnerRender(): string {\n        if (!this._source.data) {\n            return \"\";\n        }\n\n        return this._question.Render() +\n            this._optionA.Render() +\n            this._optionB.Render();\n    }\n\n    Update() {\n        super.Update();\n        this._question.Update();\n        this._optionA.Update();\n        this._optionB.Update();\n    }\n\n}"]}