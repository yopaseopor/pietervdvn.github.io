{"version":3,"sources":["UI/UIElement.ts","UI/Base/VerticalCombine.ts","UI/UIEventSource.ts","Logic/TagsFilter.ts","UI/Base/FixedUiElement.ts","Logic/LocalStorageSource.ts","UI/Input/InputElement.ts","UI/Input/DropDown.ts","UI/i18n/Locale.ts","UI/Base/Combine.ts","UI/i18n/Translation.ts","UI/i18n/Translations.ts","UI/SaveButton.ts","UI/Base/VariableUIElement.ts","Customizations/OnlyShowIf.ts","UI/Input/TextField.ts","UI/Input/InputElementWrapper.ts","UI/Input/FixedInputElement.ts","UI/Input/RadioButton.ts","Customizations/TagRendering.ts","UI/Img.ts","Customizations/Questions/OsmLink.ts","Customizations/Questions/WikipediaLink.ts","UI/FeatureInfoBox.ts","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"FeatureInfoBox.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\n\nexport abstract class UIElement {\n    \n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n    \n    // WOrkaround as document is not defined\n    public static runningFromConsole = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    public ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return this;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n        return this;\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n    \n    Update(): void {\n        if(UIElement.runningFromConsole){\n            return;\n        }\n        \n        let element = document.getElementById(this.id);\n        if (element === undefined || element === null) {\n            // The element is not painted\n            return;\n        }\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = (e) => {\n                // @ts-ignore\n                if(e.consumed){\n                    return;\n                }\n                self._onClick();\n                // @ts-ignore\n                e.consumed = true;\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n        }\n\n        this.InnerUpdate(element);\n\n        for (const i in this) {\n            const child = this[i];\n            if (child instanceof UIElement) {\n                child.Update();\n            } else if (child instanceof Array) {\n                for (const ch of child) {\n                    if (ch instanceof UIElement) {\n                        ch.Update();\n                    }\n                }\n            }\n        }\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n   protected InnerUpdate(htmlElement: HTMLElement) {\n   }\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if (element === null) {\n            throw \"SEVERE: could not attach UIElement to \" + divId;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    public abstract InnerRender(): string;\n\n    public Activate(): void {\n        for (const i in this) {\n            const child = this[i];\n            if (child instanceof UIElement) {\n                child.Activate();\n            } else if (child instanceof Array) {\n                for (const ch of child) {\n                    if (ch instanceof UIElement) {\n                        ch.Activate();\n                    }\n                }\n            }\n        }\n    };\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n}\n\n\n","import {UIElement} from \"../UIElement\";\n\nexport class VerticalCombine extends UIElement {\n    private _elements: UIElement[];\n    private _className: string;\n\n    constructor(elements: UIElement[], className: string = undefined) {\n        super(undefined);\n        this._elements = elements;\n        this._className = className;\n    }\n\n    protected InnerRender(): string {\n        let html = \"\";\n        for (const element of this._elements) {\n            if (!element.IsEmpty()) {\n                html += \"<div>\" + element.Render() + \"</div>\";\n            }\n        }\n        if(html === \"\"){\n            return \"\";\n        }\n        if (this._className === undefined) {\n            return html;\n        }\n        return \"<div class='\"+this._className+\"'>\" + html + \"</div>\";\n    }\n}","export class UIEventSource<T>{\n    \n    public data: T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public static flatten<X>(source: UIEventSource<UIEventSource<X>>, possibleSources: UIEventSource<any>[]): UIEventSource<X> {\n        const sink = new UIEventSource<X>(source.data?.data);\n\n        source.addCallback((latestData) => {\n           sink.setData(latestData?.data);\n        });\n\n        for (const possibleSource of possibleSources) {\n            possibleSource.addCallback(() => {\n                sink.setData(source.data?.data);\n                \n            })\n        }\n        \n        return sink;\n    }\n    \n    public map<J>(f: ((T) => J),\n                  extraSources: UIEventSource<any>[] = []): UIEventSource<J> {\n        const self = this;\n\n        const update = function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        }\n\n        this.addCallback(update);\n        for (const extraSource of extraSources) {\n            extraSource.addCallback(update);\n        }\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n        \n\n        return newSource;\n\n    }\n\n    \n    public syncWith(otherSource: UIEventSource<T>) : UIEventSource<T>{\n        this.addCallback((latest) => otherSource.setData(latest));\n        const self = this;\n        otherSource.addCallback((latest) => self.setData(latest));\n        if(this.data === undefined){\n           this.setData(otherSource.data);\n        }else{\n            otherSource.setData(this.data);\n        }\n        return this;\n    }\n\n}","\nexport abstract class TagsFilter {\n    abstract matches(tags: { k: string, v: string }[]): boolean\n    abstract asOverpass(): string[]\n    abstract substituteValues(tags: any) : TagsFilter;\n\n    matchesProperties(properties: any) : boolean{\n        return this.matches(TagUtils.proprtiesToKV(properties));\n    }\n}\n\n\nexport class Regex extends TagsFilter {\n    private _k: string;\n    private _r: string;\n\n    constructor(k: string, r: string) {\n        super();\n        this._k = k;\n        this._r = r;\n    }\n\n    asOverpass(): string[] {\n        return [\"['\" + this._k + \"'~'\" + this._r + \"']\"];\n    }\n\n    matches(tags: { k: string; v: string }[]): boolean {\n        if(!(tags instanceof Array)){\n            throw \"You used 'matches' on something that is not a list. Did you mean to use 'matchesProperties'?\"\n        }\n        \n        for (const tag of tags) {\n            if (tag.k === this._k) {\n                if (tag.v === \"\") {\n                    // This tag has been removed\n                    return false;\n                }\n                if (this._r === \"*\") {\n                    // Any is allowed\n                    return true;\n                }\n                \n\n                const matchCount =tag.v.match(this._r)?.length;\n                return (matchCount ?? 0) > 0;\n            }\n        }\n        return false;\n    }\n\n    substituteValues(tags: any) : TagsFilter{\n        throw \"Substituting values is not supported on regex tags\"\n    }\n\n}\n\nexport class Tag extends TagsFilter {\n    public key: string;\n    public value: string;\n\n    constructor(key: string, value: string) {\n        super()\n        this.key = key;\n        this.value = value;\n    }\n\n    matches(tags: { k: string; v: string }[]): boolean {\n        for (const tag of tags) {\n            if (tag.k === this.key) {\n                if (tag.v === \"\") {\n                    // This tag has been removed\n                    return this.value === \"\";\n                }\n                if (this.value === \"*\") {\n                    // Any is allowed\n                    return true;\n                }\n\n                return this.value === tag.v;\n            }\n        }\n        if(this.value === \"\"){\n            return true;\n        }\n        \n        return false;\n    }\n\n    asOverpass(): string[] {\n        if (this.value === \"*\") {\n            return ['[\"' + this.key + '\"]'];\n        }\n        if (this.value === \"\") {\n            // NOT having this key\n            return ['[!\"' + this.key + '\"]'];\n        }\n        return ['[\"' + this.key + '\"=\"' + this.value + '\"]'];\n    }\n\n    substituteValues(tags: any) {\n        return new Tag(this.key, TagUtils.ApplyTemplate(this.value, tags));\n    }\n\n}\n\nexport class Or extends TagsFilter {\n\n    public or: TagsFilter[]\n\n    constructor(or: TagsFilter[]) {\n        super();\n        this.or = or;\n    }\n\n\n    matches(tags: { k: string; v: string }[]): boolean {\n\n        for (const tagsFilter of this.or) {\n            if (tagsFilter.matches(tags)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    asOverpass(): string[] {\n\n        const choices = [];\n        for (const tagsFilter of this.or) {\n            const subChoices = tagsFilter.asOverpass();\n            for(const subChoice of subChoices){\n                choices.push(subChoice)\n            }\n        }\n        return choices;\n    }\n\n    substituteValues(tags: any): TagsFilter {\n        const newChoices = [];\n        for (const c of this.or) {\n            newChoices.push(c.substituteValues(tags));\n        }\n        return new Or(newChoices);\n    }\n\n}\n\nexport class And extends TagsFilter {\n\n    public and: TagsFilter[]\n\n    constructor(and: TagsFilter[]) {\n        super();\n        this.and = and;\n    }\n\n    matches(tags: { k: string; v: string }[]): boolean {\n\n        for (const tagsFilter of this.and) {\n            if (!tagsFilter.matches(tags)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    private combine(filter: string, choices: string[]): string[] {\n        var values = []\n        for (const or of choices) {\n            values.push(filter + or);\n        }\n        return values;\n    }\n\n    asOverpass(): string[] {\n\n        var allChoices = null;\n\n        for (const andElement of this.and) {\n            var andElementFilter = andElement.asOverpass();\n            if (allChoices === null) {\n                allChoices = andElementFilter;\n                continue;\n            }\n\n            var newChoices = []\n            for (var choice of allChoices) {\n                newChoices.push(\n                    this.combine(choice, andElementFilter)\n                )\n            }\n            allChoices = newChoices;\n        }\n        return allChoices;\n    }\n\n    substituteValues(tags: any): TagsFilter {\n        const newChoices = [];\n        for (const c of this.and) {\n            newChoices.push(c.substituteValues(tags));\n        }\n        return new And(newChoices);\n    }\n}\n\nexport class Not extends TagsFilter{\n    private not: TagsFilter;\n    \n    constructor(not: TagsFilter) {\n        super();\n        this.not = not;\n    }\n    \n    asOverpass(): string[] {\n        throw \"Not supported yet\"\n    }\n\n    matches(tags: { k: string; v: string }[]): boolean {\n        return !this.not.matches(tags);\n    }\n\n    substituteValues(tags: any): TagsFilter {\n        return new Not(this.not.substituteValues(tags));\n    }\n    \n}\n\n\nexport class TagUtils {\n\n    static proprtiesToKV(properties: any): { k: string, v: string }[] {\n        const result = [];\n        for (const k in properties) {\n            result.push({k: k, v: properties[k]})\n        }\n        return result;\n    }\n\n    static ApplyTemplate(template: string, tags: any): string {\n        for (const k in tags) {\n            while (template.indexOf(\"{\" + k + \"}\") >= 0) {\n                template = template.replace(\"{\" + k + \"}\", tags[k]);\n            }\n        }\n        return template;\n    }\n\n}","import {UIElement} from \"../UIElement\";\n\nexport class FixedUiElement extends UIElement {\n    private _html: string;\n\n    constructor(html: string) {\n        super(undefined);\n        this._html = html ?? \"\";\n    }\n\n    InnerRender(): string {\n        return this._html;\n    }\n\n\n}","import {UIEventSource} from \"../UI/UIEventSource\";\n\nexport class LocalStorageSource {\n\n    static Get(key: string, defaultValue: string = undefined): UIEventSource<string> {\n        \n        //*\n            // ignore when running from the console\n            return new UIEventSource<string>(defaultValue);\n            /*/\n        const saved = localStorage.getItem(key);\n        const source = new UIEventSource<string>(saved ?? defaultValue);\n\n        source.addCallback((data) => {\n            localStorage.setItem(key, data);\n            console.log(\"Wriging \", key, data)\n        });\n        return source;\n        //*/\n    }\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\n\nexport abstract class InputElement<T> extends UIElement{\n    \n    abstract GetValue() : UIEventSource<T>;\n    \n    abstract IsValid(t: T) : boolean;\n    \n}\n\n","import {UIEventSource} from \"../UIEventSource\";\nimport {UIElement} from \"../UIElement\";\nimport {InputElement} from \"./InputElement\";\nimport instantiate = WebAssembly.instantiate;\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\nimport Translations from \"../i18n/Translations\";\n\nexport class DropDown<T> extends InputElement<T> {\n\n    private readonly _label: UIElement;\n    private readonly _values: { value: T; shown: UIElement }[];\n\n    private readonly _value : UIEventSource<T>;\n\n    constructor(label: string | UIElement,\n                values: { value: T, shown: string | UIElement }[],\n                value: UIEventSource<T> = undefined) {\n        super(undefined);\n        this._value = value ?? new UIEventSource<T>(undefined);\n        this._label = Translations.W(label);\n        this._values = values.map(v => {\n                return {\n                    value: v.value,\n                    shown: Translations.W(v.shown)\n                }\n            }\n        );\n        for (const v of this._values) {\n            this.ListenTo(v.shown._source);\n        }\n        this.ListenTo(this._value);\n        \n        this.onClick(() => {}) // by registering a click, the click event is consumed and doesn't bubble furter to other elements, e.g. checkboxes\n        \n\n    }\n\n    GetValue(): UIEventSource<T> {\n        return this._value;\n    }\n\n    ShowValue(t: T): boolean {\n        if (!this.IsValid(t)) {\n            return false;\n        }\n        this._value.setData(t);\n    }\n\n    IsValid(t: T): boolean {\n        for (const value of this._values) {\n            if (value.value === t) {\n                return true;\n            }\n        }\n        return false\n    }\n\n\n    InnerRender(): string {\n        if(this._values.length <=1){\n            return \"\";\n        }\n        \n        let options = \"\";\n        for (let i = 0; i < this._values.length; i++) {\n            options += \"<option value='\" + i + \"'>\" + this._values[i].shown.InnerRender() + \"</option>\"\n        }\n        \n        return \"<form>\" +\n            \"<label for='dropdown-\" + this.id + \"'>\" + this._label.Render() + \" </label>\" +\n            \"<select name='dropdown-\" + this.id + \"' id='dropdown-\" + this.id + \"'>\" +\n            options +\n            \"</select>\" +\n            \"</form>\";\n    }\n\n    protected InnerUpdate(element) {\n        var e = document.getElementById(\"dropdown-\" + this.id);\n        if(e === null){\n            return;\n        }\n        const self = this;\n        e.onchange = (() => {\n            // @ts-ignore\n            var index = parseInt(e.selectedIndex);\n            self._value.setData(self._values[index].value);\n        });\n\n        var t = this._value.data;\n        for (let i = 0; i < this._values.length ; i++) {\n            const value = this._values[i].value;\n            if (value === t) {\n                // @ts-ignore\n                e.selectedIndex = i;\n            }\n        }\n    }\n}","import {UIEventSource} from \"../UIEventSource\";\nimport {LocalStorageSource} from \"../../Logic/LocalStorageSource\";\nimport {DropDown} from \"../Input/DropDown\";\nimport {Layout} from \"../../Customizations/Layout\";\nimport {UIElement} from \"../UIElement\";\n\n\nexport default class Locale {\n    public static language: UIEventSource<string> = LocalStorageSource.Get('language', \"en\");\n\n    public static CreateLanguagePicker(layoutToUse: Layout, label: string | UIElement = \"\") {\n\n        return new DropDown(label, layoutToUse.supportedLanguages.map(lang => {\n                return {value: lang, shown: lang}\n            }\n        ), Locale.language);\n    }\n}\n\n\n","import {UIElement} from \"../UIElement\";\nimport Translations from \"../i18n/Translations\";\n\nexport default class Combine extends UIElement {\n    private uiElements: (string | UIElement)[];\n    private clas: string = undefined;\n\n    constructor(uiElements: (string | UIElement)[]) {\n        super(undefined);\n        this.uiElements = uiElements;\n    }\n\n    InnerRender(): string {\n        let elements = \"\";\n        for (const element of this.uiElements) {\n            if (element instanceof UIElement) {\n                elements += element.Render();\n            } else {\n                elements += element;\n            }\n        }\n        return elements;\n    }\n\n    InnerUpdate(htmlElement: HTMLElement) {\n        for (const element of this.uiElements) {\n            if (element instanceof UIElement) {\n                element.Update();\n            }\n        }\n    }\n}","import {UIElement} from \"../UIElement\"\nimport Locale from \"./Locale\"\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\nimport {TagUtils} from \"../../Logic/TagsFilter\";\nimport Combine from \"../Base/Combine\";\n\n\nexport default class Translation extends UIElement {\n\n    private static forcedLanguage = undefined;\n\n    public Subs(text: any /*Map<string, string | UIElement>*/) {\n        const newTranslations = {};\n        for (const lang in this.translations) {\n            let template: string = this.translations[lang];\n            for (const k in text) {\n                const combined = [];\n                const parts = template.split(\"{\" + k + \"}\");\n                const el: string | UIElement = text[k];\n                let rtext: string = \"\";\n                console.log(parts)\n                if (typeof (el) === \"string\") {\n                    rtext = el;\n                } else {\n                    Translation.forcedLanguage = lang; // This is a very dirty hack - it'll bite me one day\n                    rtext = el.InnerRender();\n                    console.log(rtext)\n                }\n                for (let i = 0; i < parts.length - 1; i++) {\n                    combined.push(parts[i]);\n                    combined.push(rtext)\n                }\n                combined.push(parts[parts.length - 1]);\n                template = new Combine(combined).InnerRender();\n            }\n            newTranslations[lang] = template;\n        }\n        Translation.forcedLanguage = undefined;\n        return new Translation(newTranslations);\n\n    }\n\n\n    get txt(): string {\n        const txt = this.translations[Translation.forcedLanguage ?? Locale.language.data];\n        if (txt !== undefined) {\n            return txt;\n        }\n        const en = this.translations[\"en\"];\n        console.warn(\"No translation for language \", Locale.language.data, \"for\", en);\n        if (en !== undefined) {\n            return en;\n        }\n        for (const i in this.translations) {\n            return this.translations[i]; // Return a random language\n        }\n        return \"Missing translation\"\n    }\n\n    InnerRender(): string {\n        return this.txt\n    }\n\n    public readonly translations: object\n\n    constructor(translations: object) {\n        super(Locale.language)\n        this.translations = translations\n    }\n\n\n    public R(): string {\n        return new Translation(this.translations).Render();\n    }\n\n    public Clone() {\n        return new Translation(this.translations)\n    }\n\n \n}\n","import Translation from \"./Translation\";\nimport T from \"./Translation\";\nimport {UIElement} from \"../UIElement\";\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\n\n\nexport default class Translations {\n\n    constructor() {\n        throw \"Translations is static. If you want to intitialize a new translation, use the singular form\"\n    }\n\n\n    static t = {\n        cyclofix: {\n            title: new T({\n                en: 'Cyclofix - an open map for cyclists',\n                nl: 'Cyclofix - een open kaart voor fietsers',\n                fr: 'TODO: FRENCH TRANSLATION'\n            }),\n            description: new T({\n                en: \"On this map we want to collect data about the whereabouts of bicycle pumps and public racks in Brussels and everywhere else.\" +\n                    \"As a result, cyclists will be able to quickly find the nearest infrastructure for their needs.\",\n                nl: \"Op deze kaart willen we gegevens verzamelen over de locatie van fietspompen en openbare stelplaatsen in Brussel en overal ter wereld.\" +\n                    \"Hierdoor kunnen fietsers snel de dichtstbijzijnde infrastructuur vinden die voldoet aan hun behoeften.\",\n                fr: \"Sur cette carte, nous voulons collecter des données sur la localisation des pompes à vélo et des supports publics à Bruxelles.\" +\n                    \"Les cyclistes pourront ainsi trouver rapidement l'infrastructure la plus proche de leurs besoins.\"\n            }),\n            freeFormPlaceholder: new T({en: 'specify', nl: 'specifieer', fr: 'TODO: fr'}),\n            parking: {\n                name: new T({en: 'bike parking', nl: 'fietsparking', fr: 'TODO: fr'}),\n                title: new T({en: 'Bike parking', nl: 'Fietsparking', fr: 'TODO: fr'}),\n                type: {\n                    render: new T({\n                        en: 'This is a bicycle parking of the type: {bicycle_parking}',\n                        nl: 'Dit is een fietsenparking van het type: {bicycle_parking}',\n                        fr: 'TODO: fr'\n                    }),\n                    template: new T({en: 'Some other type: $$$', nl: 'Een ander type: $$$', fr: 'TODO: fr'}),\n                    question: new T({\n                        en: 'What is the type of this bicycle parking?',\n                        nl: 'Van welk type is deze fietsenparking?',\n                        fr: 'TODO: fr'\n                    }),\n                    eg: new T({en: \", for example\", nl: \", bijvoorbeeld\"}),\n                    stands: new T({en: 'Staple racks', nl: 'Nietjes', fr: 'TODO: fr'}),\n                    wall_loops: new T({en: 'Wheel rack/loops', nl: 'Wielrek/lussen', fr: 'TODO: fr'}),\n                    handlebar_holder: new T({en: 'Handlebar holder', nl: 'Stuurhouder', fr: 'TODO: fr'}),\n                    shed: new T({en: 'Shed', nl: 'Schuur', fr: 'TODO: fr'}),\n                    rack: new T({en: 'Rack', nl: 'Rek', fr: 'TODO: fr'}),\n                    \"two-tier\": new T({en: 'Two-tiered', nl: 'Dubbel (twee verdiepingen)', fr: 'TODO: fr'}),\n                },\n\n                operator: {\n                    render: new T({\n                        en: 'This bike parking is operated by {operator}',\n                        nl: 'Deze fietsenparking wordt beheerd door {operator}',\n                        fr: 'TODO: fr'\n                    }),\n                    template: new T({en: 'A different operator: $$$', nl: 'Een andere beheerder: $$$', fr: 'TODO: fr'}),\n                    question: new T({\n                        en: 'Who operates this bike station (name of university, shop, city...)?',\n                        nl: 'Wie beheert deze fietsenparking (naam universiteit, winkel, stad...)?',\n                        fr: 'TODO: fr'\n                    }),\n                    private: new T({\n                        en: 'Operated by a private person',\n                        nl: 'Wordt beheerd door een privépersoon',\n                        fr: 'TODO: fr'\n                    }),\n                }\n            },\n            station: {\n                name: new T({\n                    en: 'bike station (repair, pump or both)',\n                    nl: 'fietsstation (herstel, pomp of allebei)',\n                    fr: 'TODO: fr'\n                }),\n                title: new T({en: 'Bike station', nl: 'Fietsstation', fr: 'TODO: fr'}),\n                manometer: {\n                    question: new T({\n                        en: 'Does the pump have a pressure indicator or manometer?',\n                        nl: 'Heeft deze pomp een luchtdrukmeter?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({en: 'There is a manometer', nl: 'Er is een luchtdrukmeter', fr: 'TODO: fr'}),\n                    no: new T({en: 'There is no manometer', nl: 'Er is geen luchtdrukmeter', fr: 'TODO: fr'}),\n                    broken: new T({\n                        en: 'There is manometer but it is broken',\n                        nl: 'Er is een luchtdrukmeter maar die is momenteel defect',\n                        fr: 'TODO: fr'\n                    })\n                },\n                electric: {\n                    question: new T({\n                        en: 'Is this an electric bike pump?',\n                        nl: 'Is dit een electrische fietspomp?',\n                        fr: 'TODO: fr'\n                    }),\n                    manual: new T({en: 'Manual pump', nl: 'Manuele pomp', fr: 'TODO: fr'}),\n                    electric: new T({en: 'Electrical pump', nl: 'Electrische pomp', fr: 'TODO: fr'})\n                },\n                operational: {\n                    question: new T({\n                        en: 'Is the bike pump still operational?',\n                        nl: 'Werkt de fietspomp nog?',\n                        fr: 'TODO: fr'\n                    }),\n                    operational: new T({\n                        en: 'The bike pump is operational',\n                        nl: 'De fietspomp werkt nog',\n                        fr: 'TODO: fr'\n                    }),\n                    broken: new T({en: 'The bike pump is broken', nl: 'De fietspomp is kapot', fr: 'TODO: fr'})\n                },\n                valves: {\n                    question: new T({\n                        en: 'What valves are supported?',\n                        nl: 'Welke ventielen werken er met de pomp?',\n                        fr: 'TODO: fr'\n                    }),\n                    default: new T({\n                        en: 'There is a default head, so Dunlop, Sclaverand and auto',\n                        nl: 'Er is een standaard aansluiting, die dus voor Dunlop, Sclaverand en auto\\'s werkt',\n                        fr: 'TODO: fr'\n                    }),\n                    dunlop: new T({en: 'Only Dunlop', nl: 'Enkel Dunlop', fr: 'TODO: fr'}),\n                    sclaverand: new T({\n                        en: 'Only Sclaverand (also known as Presta)',\n                        nl: 'Enkel Sclaverand (ook gekend als Presta)',\n                        fr: 'TODO: fr'\n                    }),\n                    auto: new T({en: 'Only for cars', nl: 'Enkel voor auto\\'s', fr: 'TODO: fr'}),\n                    render: new T({\n                        en: 'This pump supports the following valves: {valves}',\n                        nl: 'Deze pomp werkt met de volgende ventielen: {valves}',\n                        fr: 'TODO: fr'\n                    }),\n                    template: new T({\n                        en: 'Some other valve(s): $$$',\n                        nl: 'Een ander type ventiel(en): $$$',\n                        fr: 'TODO: fr'\n                    })\n                },\n                chain: {\n                    question: new T({\n                        en: 'Does this bike station have a special tool to repair your bike chain?',\n                        nl: 'Heeft dit fietsstation een speciale reparatieset voor je ketting?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({\n                        en: 'There is a chain tool',\n                        nl: 'Er is een reparatieset voor je ketting',\n                        fr: 'TODO: fr'\n                    }),\n                    no: new T({\n                        en: 'There is no chain tool',\n                        nl: 'Er is geen reparatieset voor je ketting',\n                        fr: 'TODO: fr'\n                    }),\n                },\n                operator: {\n                    render: new T({\n                        en: 'This bike station is operated by {operator}',\n                        nl: 'Dit fietsstation wordt beheerd door {operator}',\n                        fr: 'TODO: fr'\n                    }),\n                    template: new T({en: 'A different operator: $$$', nl: 'Een andere beheerder: $$$', fr: 'TODO: fr'}),\n                    question: new T({\n                        en: 'Who operates this bike station (name of university, shop, city...)?',\n                        nl: 'Wie beheert dit fietsstation (naam universiteit, winkel, stad...)?',\n                        fr: 'TODO: fr'\n                    }),\n                    private: new T({\n                        en: 'Operated by a private person',\n                        nl: 'Wordt beheerd door een privépersoon',\n                        fr: 'TODO: fr'\n                    }),\n                },\n                services: {\n                    question: new T({\n                        en: 'Which services are available at this bike station?',\n                        nl: 'Welke functies biedt dit fietsstation?',\n                        fr: 'TODO: fr'\n                    }),\n                    pump: new T({\n                        // Note: this previously read: a pump is available. It is not because the pump is present, that it is available (e.g. broken)\n                        en: 'There is only a pump present',\n                        nl: 'Er is enkel een pomp aanwezig',\n                        fr: 'TODO: fr'\n                    }),\n                    tools: new T({\n                        en: 'There are only tools (screwdrivers, pliers...) aanwezig',\n                        nl: 'Er is enkel gereedschap aanwezig (schroevendraaier, tang...)',\n                        fr: 'TODO: fr'\n                    }),\n                    both: new T({\n                        en: 'There are both tools and a pump present',\n                        nl: 'Er is zowel een pomp als gereedschap aanwezig',\n                        fr: 'TODO: fr'\n                    }),\n                },\n                stand: {\n                    question: new T({\n                        en: 'Does this bike station have a hook to suspend your bike with or a stand to elevate it?',\n                        nl: 'Heeft dit fietsstation een haak of standaard om je fiets op te hangen/zetten?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({en: 'There is a hook or stand', nl: 'Er is een haak of standaard', fr: 'TODO: fr'}),\n                    no: new T({en: 'There is no hook or stand', nl: 'Er is geen haak of standaard', fr: 'TODO: fr'}),\n                }\n            },\n            shop: {\n                name: new T({en: 'bike shop', nl: 'fietswinkel', fr: 'TODO: fr'}),\n                \n                title: new T({en: 'Bike shop', nl: 'Fietszaak', fr: 'TODO: fr'}),\n                titleRepair: new T({en: 'Bike repair', nl: 'Fietsenmaker', fr: 'TODO: fr'}),\n                titleShop: new T({en: 'Bike repair/shop', nl: 'Fietswinkel', fr: 'TODO: fr'}),\n                \n                titleNamed: new T({en: 'Bike repair/shop', nl: 'Fietszaak {name}', fr: 'TODO: fr'}),\n                titleRepairNamed: new T({en: 'Bike shop', nl: 'Fietsenmaker {name}', fr: 'TODO: fr'}),\n                titleShopNamed: new T({en: 'Bike repair/shop', nl: 'Fietswinkel {name}', fr: 'TODO: fr'}),\n\n\n\n                retail: {\n                    question: new T({\n                        en: 'Does this shop sell bikes?',\n                        nl: 'Verkoopt deze winkel fietsen?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({en: 'This shop sells bikes', nl: 'Deze winkel verkoopt fietsen', fr: 'TODO: fr'}),\n                    no: new T({\n                        en: 'This shop doesn\\'t sell bikes',\n                        nl: 'Deze winkel verkoopt geen fietsen',\n                        fr: 'TODO: fr'\n                    }),\n                },\n                repair: {\n                    question: new T({\n                        en: 'Does this shop repair bikes?',\n                        nl: 'Verkoopt deze winkel fietsen?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({en: 'This shop repairs bikes', nl: 'Deze winkel herstelt fietsen', fr: 'TODO: fr'}),\n                    no: new T({\n                        en: 'This shop doesn\\'t repair bikes',\n                        nl: 'Deze winkel herstelt geen fietsen',\n                        fr: 'TODO: fr'\n                    }),\n                    sold: new T({en: 'This shop only repairs bikes bought here', nl: 'Deze winkel herstelt enkel fietsen die hier werden gekocht', fr: 'TODO: fr'}),\n                    brand: new T({en: 'This shop only repairs bikes of a certain brand', nl: 'Deze winkel herstelt enkel fietsen van een bepaald merk', fr: 'TODO: fr'}),\n                },\n                rental: {\n                    question: new T({\n                        en: 'Does this shop rent out bikes?',\n                        nl: 'Verhuurt deze winkel fietsen?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({en: 'This shop rents out bikes', nl: 'Deze winkel verhuurt fietsen', fr: 'TODO: fr'}),\n                    no: new T({\n                        en: 'This shop doesn\\'t rent out bikes',\n                        nl: 'Deze winkel verhuurt geen fietsen',\n                        fr: 'TODO: fr'\n                    }),\n                },\n                pump: {\n                    question: new T({\n                        en: 'Does this shop offer a bike pump for use by anyone?',\n                        nl: 'Biedt deze winkel een fietspomp aan voor iedereen?',\n                        fr: 'TODO: fr'\n                    }),\n                    yes: new T({\n                        en: 'This shop offers a bike pump for anyone',\n                        nl: 'Deze winkel biedt geen fietspomp aan voor eender wie',\n                        fr: 'TODO: fr'\n                    }),\n                    no: new T({\n                        en: 'This shop doesn\\'t offer a bike pump for anyone',\n                        nl: 'Deze winkel biedt een fietspomp aan voor iedereen',\n                        fr: 'TODO: fr'\n                    })\n                },\n                qName: {\n                    question: new T({en: 'What is the name of this bicycle shop?', nl: 'Wat is de naam van deze fietszaak?', fr: 'TODO: fr'}),\n                    render: new T({en: 'This bicycle shop is called {name}', nl: 'Deze fietszaak heet <b>{name}</b>', fr: 'TODO: fr'}),\n                    template: new T({en: 'This bicycle shop is called: $$$', nl: 'Deze fietszaak heet: <b>$$$</b>', fr: 'TODO: fr'})\n                },\n                secondHand: {\n                    question: new T({en: 'Does this shop sell second-hand bikes?', nl: 'Verkoopt deze winkel tweedehands fietsen?', fr: 'TODO: fr'}),\n                    yes: new T({en: 'This shop sells second-hand bikes', nl: 'Deze winkel verkoopt tweedehands fietsen', fr: 'TODO: fr'}),\n                    no: new T({en: 'This shop doesn\\'t sell second-hand bikes', nl: 'Deze winkel verkoopt geen tweedehands fietsen', fr: 'TODO: fr'}),\n                    only: new T({en: 'This shop only sells second-hand bikes', nl: 'Deze winkel verkoopt enkel tweedehands fietsen', fr: 'TODO: fr'}),\n                },\n                diy: {\n                    question: new T({en: 'Are there tools here to repair your own bike?', nl: 'Biedt deze winkel gereedschap aan om je fiets zelf te herstellen?', fr: 'TODO: fr'}),\n                    yes: new T({en: 'This shop offers tools for DIY repair', nl: 'Deze winkel biedt gereedschap aan om je fiets zelf te herstellen', fr: 'TODO: fr'}),\n                    no: new T({en: 'This shop doesn\\'t offer tools for DIY repair', nl: 'Deze winkel biedt geen gereedschap aan om je fiets zelf te herstellen', fr: 'TODO: fr'}),\n                }\n            },\n            drinking_water: {\n                title: new T({\n                    en: 'Drinking water',\n                    nl: \"Drinkbaar water\"\n                })\n            }\n        },\n        image: {\n            addPicture: new T({en: 'Add picture', nl: 'Voeg foto toe', fr: 'TODO: fr'}),\n            uploadingPicture: new T({\n                en: 'Uploading your picture...',\n                nl: 'Bezig met een foto te uploaden...',\n                fr: 'TODO: fr'\n            }),\n            pleaseLogin: new T({\n                en: 'Please login to add a picure or to answer questions',\n                nl: 'Gelieve je aan te melden om een foto toe te voegen of vragen te beantwoorden',\n                fr: 'TODO: fr'\n            }),\n            willBePublished: new T({\n                en: 'Your picture will be published: ',\n                nl: 'Jouw foto wordt gepubliceerd: ',\n                fr: 'TODO: fr'\n            }),\n            cco: new T({en: 'in the public domain', nl: 'in het publiek domein', fr: 'TODO: fr'}),\n            ccbs: new T({en: 'under the CC-BY-SA-license', nl: 'onder de CC-BY-SA-licentie', fr: 'TODO: fr'}),\n            ccb: new T({en: 'under the CC-BY-license', nl: 'onder de CC-BY-licentie', fr: 'TODO: fr'})\n        },\n        centerMessage: {\n            loadingData: new T({en: 'Loading data...', nl: 'Data wordt geladen...', fr: 'TODO: fr'}),\n            zoomIn: new T({\n                en: 'Zoom in to view or edit the data',\n                nl: 'Zoom in om de data te zien en te bewerken',\n                fr: 'TODO: fr'\n            }),\n            ready: new T({en: 'Done!', nl: 'Klaar!', fr: 'TODO: fr'}),\n        },\n        general: {\n            loginWithOpenStreetMap: new T({en: \"Login with OpenStreetMap\", nl: \"Aanmelden met OpenStreetMap\"}),\n            getStarted: new T({\n                en: \"<span class='activate-osm-authentication'>Login with OpenStreetMap</span> or <a href='https://www.openstreetmap.org/user/new' target='_blank'>make a free account to get started</a>\",\n                nl: \"<span class='activate-osm-authentication'>Meld je aan met je OpenStreetMap-account</span> of <a href='https://www.openstreetmap.org/user/new' target='_blank'>maak snel en gratis een account om te beginnen</a>\",\n            }),\n            welcomeBack: new T({\n                en: \"You are logged in, welcome back!\",\n                nl: \"Je bent aangemeld. Welkom terug!\"\n            }),\n            search: {\n                search: new Translation({\n                    en: \"Search a location\",\n                    nl: \"Zoek naar een locatie\"\n                }),\n                searching: new Translation({\n                    en: \"Searching...\",\n                    nl: \"Aan het zoeken...\"\n                }),\n                nothing: new Translation({\n                    en: \"Nothing found...\",\n                    nl: \"Niet gevonden...\"\n                }),\n                error: new Translation({\n                    en: \"Something went wrong...\",\n                    nl: \"Niet gelukt...\"\n                })\n\n            },\n            returnToTheMap: new T({\n                en: \"Return to the map\",\n                nl: \"Naar de kaart\"\n            }),\n            save: new T({\n                en: \"Save\",\n                nl: \"Opslaan\"\n            }),\n            cancel: new T({\n                en: \"Cancel\",\n                nl: \"Annuleren\"\n            }),\n            skip: new T({\n                en: \"Skip this question\",\n                nl: \"Vraag overslaan\"\n            }),\n            oneSkippedQuestion: new T({\n                en: \"One question is skipped\",\n                nl: \"Een vraag is overgeslaan\"\n            }),\n            skippedQuestions: new T({\n                en: \"Some questions are skipped\",\n                nl: \"Sommige vragen zijn overgeslaan\"\n            }),\n            number: new T({\n                en: \"number\",\n                nl: \"getal\"\n            }),\n\n            osmLinkTooltip: new T({\n               en: \"See this object on OpenStreetMap for history and more editing options\",\n                nl: \"Bekijk dit object op OpenStreetMap waar geschiedenis en meer aanpasopties zijn\"\n            }),\n            \n            add: {\n\n                addNew: new T({\n                    en: \"Add a new {category} here\",\n                    nl: \"Voeg hier een {category} toe\"\n                }),\n                header: new T({\n                    en: \"<h2>No data</h2>You clicked somewhere where no data is known yet.<br/>\",\n                    nl: \"<h2>Geen selectie</h2>Je klikte ergens waar er nog geen data is.<br/>\"\n                }),\n                pleaseLogin: new T({\n                    en: \"<a class='activate-osm-authentication'>Please log in to add a new point</a>\",\n                    nl: \"<a class='activate-osm-authentication'>Gelieve je aan te melden om een punt to te voegen</a>\"\n                }),\n                zoomInFurther: new T({\n                    en: \"Zoom in further to add a point.\",\n                    nl: \"Gelieve verder in te zoomen om een punt toe te voegen\"\n                }),\n                stillLoading: new T({\n                    en: \"The data is still loading. Please wait a bit before you add a new point\",\n                    nl: \"De data wordt nog geladen. Nog even geduld en dan kan je een punt toevoegen.\"\n                })\n            },\n            pickLanguage: new T({\n                en: \"Choose a language\",\n                nl: \"Kies je taal\"\n            }),\n            about: new T({\n                en: \"Easily edit and add OpenStreetMap for a certain theme\",\n                nl: \"Easily edit and add OpenStreetMap for a certain theme\"\n\n            })\n        }   \n    }\n\n    public static W(s: string | UIElement): UIElement {\n        if (s instanceof UIElement) {\n            return s;\n        }\n        return new FixedUiElement(s);\n    }\n\n}\n","import {UIEventSource} from \"./UIEventSource\";\nimport {UIElement} from \"./UIElement\";\nimport Translations from \"./i18n/Translations\";\n\nexport class SaveButton extends UIElement {\n    private _value: UIEventSource<any>;\n\n    constructor(value: UIEventSource<any>) {\n        super(value);\n        if(value === undefined){\n            throw \"No event source for savebutton, something is wrong\"\n        }\n        this._value = value;\n    }\n\n    InnerRender(): string {\n        if (this._value.data === undefined ||\n            this._value.data === null\n            || this._value.data === \"\"\n        ) {\n            return \"<span class='save-non-active'>\"+Translations.t.general.save.Render()+\"</span>\"\n        }\n        return \"<span class='save'>\"+Translations.t.general.save.Render()+\"</span>\";\n    }\n\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\n\nexport class VariableUiElement extends UIElement {\n    private _html: UIEventSource<string>;\n    private _innerUpdate: (htmlElement: HTMLElement) => void;\n\n    constructor(html: UIEventSource<string>, innerUpdate : ((htmlElement : HTMLElement) => void) = undefined) {\n        super(html);\n        this._html = html;\n        this._innerUpdate = innerUpdate;\n\n    }\n\n    InnerRender(): string {\n        return this._html.data;\n    }\n    \n}","/**\n * Wrapper around another TagDependandElement, which only shows if the filters match\n */\nimport {TagDependantUIElement, TagDependantUIElementConstructor} from \"./UIElementConstructor\";\nimport {TagsFilter, TagUtils} from \"../Logic/TagsFilter\";\nimport {UIElement} from \"../UI/UIElement\";\nimport {UIEventSource} from \"../UI/UIEventSource\";\nimport {Changes} from \"../Logic/Changes\";\n\n\nexport class OnlyShowIfConstructor implements TagDependantUIElementConstructor{\n    private _tagsFilter: TagsFilter;\n    private _embedded: TagDependantUIElementConstructor;\n    \n    constructor(tagsFilter : TagsFilter, embedded: TagDependantUIElementConstructor) {\n        this._tagsFilter = tagsFilter;\n        this._embedded = embedded;\n    }\n\n    construct(dependencies): TagDependantUIElement {\n        return new OnlyShowIf(dependencies.tags, \n            this._embedded.construct(dependencies),\n            this._tagsFilter);\n    }\n\n    IsKnown(properties: any): boolean {\n        if(!this.Matches(properties)){\n            return true;\n        }\n        return this._embedded.IsKnown(properties);\n    }\n\n    IsQuestioning(properties: any): boolean {\n        if(!this.Matches(properties)){\n            return false;\n        }\n        return this._embedded.IsQuestioning(properties);\n    }\n\n    Priority(): number {\n        return this._embedded.Priority();\n    }\n      \n    private Matches(properties: any) : boolean{\n        return this._tagsFilter.matches(TagUtils.proprtiesToKV(properties));\n    } \n    \n}\n\nclass OnlyShowIf extends UIElement implements TagDependantUIElement {\n    private _embedded: TagDependantUIElement;\n    private _filter: TagsFilter;\n\n    constructor(\n        tags: UIEventSource<any>,\n        embedded: TagDependantUIElement, filter: TagsFilter) {\n        super(tags);\n        this._filter = filter;\n        this._embedded = embedded;\n\n    }\n    \n    private Matches() : boolean{\n        return this._filter.matches(TagUtils.proprtiesToKV(this._source.data));\n    } \n\n    InnerRender(): string {\n        if (this.Matches()) {\n            return this._embedded.Render();\n        } else {\n            return \"\";\n        }\n    }\n\n    Priority(): number {\n        return this._embedded.Priority();\n    }\n\n    IsKnown(): boolean {\n        if(!this.Matches()){\n            return false;\n        }\n        return this._embedded.IsKnown();\n    }\n    \n    IsSkipped(): boolean {\n        if(!this.Matches()){\n            return false;\n        }\n        return this._embedded.IsSkipped();\n    }\n\n    IsQuestioning(): boolean {\n        if(!this.Matches()){\n            return false;\n        }\n        return this._embedded.IsQuestioning();\n    }\n\n    Activate(): void {\n        this._embedded.Activate();\n    }\n\n    Update(): void {\n        this._embedded.Update();\n    }\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\nimport {InputElement} from \"./InputElement\";\nimport Translations from \"../i18n/Translations\";\n\n\nexport class TextField<T> extends InputElement<T> {\n\n    private value: UIEventSource<string>;\n    private mappedValue: UIEventSource<T>;\n    /**\n     * Pings and has the value data\n     */\n    public enterPressed = new UIEventSource<string>(undefined);\n    private _placeholder: UIElement;\n    private _fromString?: (string: string) => T;\n    private _toString: (t: T) => string;\n\n\n    constructor(options: {\n        /**\n         * Shown as placeholder\n         */\n        placeholder?: string | UIElement,\n\n        /**\n         * Converts the T to a (canonical) string\n         * @param t\n         */\n        toString: (t: T) => string,\n        /**\n         * Converts the string to a T\n         * Returns undefined if invalid\n         * @param string\n         */\n        fromString: (string: string) => T,\n        value?: UIEventSource<T>\n    }) {\n        super(undefined);\n        const self = this;\n        this.value = new UIEventSource<string>(\"\");\n\n        this.mappedValue = options?.value ?? new UIEventSource<T>(undefined);\n        this.mappedValue.addCallback(() => self.InnerUpdate());\n\n        // @ts-ignore\n        this._fromString = options.fromString ?? ((str) => (str))\n        this.value.addCallback((str) => this.mappedValue.setData(options.fromString(str)));\n        this.mappedValue.addCallback((t) => this.value.setData(options.toString(t)));\n\n\n        this._placeholder = Translations.W(options.placeholder ?? \"\");\n        this.ListenTo(this._placeholder._source);\n        this._toString = options.toString ?? ((t) => (\"\" + t));\n\n\n        this.mappedValue.addCallback((t) => {\n            if (t === undefined || t === null) {\n                return;\n            }\n            const field = document.getElementById('text-' + this.id);\n            if (field === undefined || field === null) {\n                return;\n            }\n            // @ts-ignore\n            field.value = options.toString(t);\n        })\n    }\n\n    GetValue(): UIEventSource<T> {\n        return this.mappedValue;\n    }\n\n    ShowValue(t: T): boolean {\n        if (!this.IsValid(t)) {\n            return false;\n        }\n        this.mappedValue.setData(t);\n    }\n\n    InnerRender(): string {\n        return `<form onSubmit='return false' class='form-text-field'>` +\n            `<input type='text' placeholder='${this._placeholder.InnerRender()}' id='text-${this.id}'>` +\n            `</form>`;\n    }\n\n    InnerUpdate() {\n        const field = document.getElementById('text-' + this.id);\n        if (field === null) {\n            return;\n        }\n\n        this.mappedValue.addCallback((data) => {\n            field.className = this.mappedValue.data !== undefined ? \"valid\" : \"invalid\";\n        });\n\n        const self = this;\n        field.oninput = () => {\n            // @ts-ignore\n            self.value.setData(field.value);\n        };\n\n        field.addEventListener(\"keyup\", function (event) {\n            if (event.key === \"Enter\") {\n                // @ts-ignore\n                self.enterPressed.setData(field.value);\n            }\n        });\n\n        if (this.IsValid(this.mappedValue.data)) {\n            const expected = this._toString(this.mappedValue.data);\n            // @ts-ignore\n            if (field.value !== expected) {\n                // @ts-ignore\n                field.value = expected;\n            }\n        }\n\n\n    }\n\n    IsValid(t: T): boolean {\n        if(t === undefined || t === null){\n            return false;\n        }\n        const result = this._toString(t);\n        return result !== undefined && result !== null;\n    }\n\n    Clear() {\n        const field = document.getElementById('text-' + this.id);\n        if (field !== undefined) {\n            // @ts-ignore\n            field.value = \"\";\n        }\n    }\n}","import {InputElement} from \"./InputElement\";\nimport {UIEventSource} from \"../UIEventSource\";\nimport {UIElement} from \"../UIElement\";\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\n\n\nexport class InputElementWrapper<T> extends InputElement<T>{\n    private pre: UIElement ;\n    private input: InputElement<T>;\n    private post: UIElement ;\n    \n    constructor(\n        pre: UIElement | string,\n        input: InputElement<T>,\n        post: UIElement | string\n        \n    ) {\n        super(undefined);\n        this.pre = typeof(pre) === 'string' ?  new FixedUiElement(pre) : pre\n        this.input = input;\n        this.post =typeof(post) === 'string' ?  new FixedUiElement(post) : post\n    }\n    \n    \n    GetValue(): UIEventSource<T> {\n        return this.input.GetValue();\n    }\n    \n    InnerRender(): string {\n        return this.pre.Render() + this.input.Render() + this.post.Render();\n    }\n\n    IsValid(t: T): boolean {\n        return this.input.IsValid(t);\n    }\n    \n}","import {InputElement} from \"./InputElement\";\nimport {UIEventSource} from \"../UIEventSource\";\nimport {UIElement} from \"../UIElement\";\nimport {FixedUiElement} from \"../Base/FixedUiElement\";\n\n\nexport class FixedInputElement<T> extends InputElement<T> {\n    private rendering: UIElement;\n    private value: UIEventSource<T>;\n\n    constructor(rendering: UIElement | string, value: T) {\n        super(undefined);\n        this.value = new UIEventSource<T>(value);\n        this.rendering = typeof (rendering) === 'string' ? new FixedUiElement(rendering) : rendering;\n    }\n\n    GetValue(): UIEventSource<T> {\n        return this.value;\n    }\n    \n    ShowValue(t: T): boolean {\n        return false;\n    }\n\n    InnerRender(): string {\n        return this.rendering.Render();\n    }\n\n    IsValid(t: T): boolean {\n        return t == this.value.data;\n    }\n    \n    \n\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\nimport {InputElement} from \"./InputElement\";\n\nexport class RadioButton<T> extends InputElement<T> {\n\n    private readonly _selectedElementIndex: UIEventSource<number>\n        = new UIEventSource<number>(null);\n\n    private value: UIEventSource<T>;\n    private readonly _elements: InputElement<T>[]\n    private _selectFirstAsDefault: boolean;\n\n\n    constructor(elements: InputElement<T>[],\n                selectFirstAsDefault = true) {\n        super(undefined);\n        this._elements = elements;\n        this._selectFirstAsDefault = selectFirstAsDefault;\n        const self = this;\n\n\n        this.value =\n            UIEventSource.flatten(this._selectedElementIndex.map(\n                (selectedIndex) => {\n                    if (selectedIndex !== undefined && selectedIndex !== null) {\n                        return elements[selectedIndex].GetValue()\n                    }\n                }\n            ), elements.map(e => e.GetValue()));\n\n        this.value.addCallback((t) => {\n            self.ShowValue(t);\n        })\n\n\n        for (let i = 0; i < elements.length; i++) {\n            // If an element is clicked, the radio button corresponding with it should be selected as well\n            elements[i].onClick(() => {\n                self._selectedElementIndex.setData(i);\n            });\n        }\n\n    }\n\n    IsValid(t: T): boolean {\n        for (const inputElement of this._elements) {\n            if (inputElement.IsValid(t)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    GetValue(): UIEventSource<T> {\n        return this.value;\n    }\n\n\n    private IdFor(i) {\n        return 'radio-' + this.id + '-' + i;\n    }\n\n    InnerRender(): string {\n\n        let body = \"\";\n        let i = 0;\n        for (const el of this._elements) {\n            const htmlElement =\n                '<input type=\"radio\" id=\"' + this.IdFor(i) + '\" name=\"radiogroup-' + this.id + '\">' +\n                '<label for=\"' + this.IdFor(i) + '\">' + el.Render() + '</label>' +\n                '<br>';\n            body += htmlElement;\n\n            i++;\n        }\n\n        return \"<form id='\" + this.id + \"-form'>\" + body + \"</form>\";\n    }\n\n    public ShowValue(t: T): boolean {\n        if (t === undefined) {\n            return false;\n        }\n        if (!this.IsValid(t)) {\n            return false;\n        }\n        // We check that what is selected matches the previous rendering\n        for (let i = 0; i < this._elements.length; i++) {\n            const e = this._elements[i];\n            if (e.IsValid(t)) {\n                this._selectedElementIndex.setData(i);\n                e.GetValue().setData(t);\n                const radio = document.getElementById(this.IdFor(i));\n                // @ts-ignore\n                radio?.checked = true;\n                return;\n            }\n\n        }\n    }\n\n    InnerUpdate(htmlElement: HTMLElement) {\n        const self = this;\n\n        function checkButtons() {\n            for (let i = 0; i < self._elements.length; i++) {\n                const el = document.getElementById(self.IdFor(i));\n                // @ts-ignore\n                if (el.checked) {\n                    self._selectedElementIndex.setData(i);\n                }\n            }\n        }\n\n\n        const el = document.getElementById(this.id);\n        el.addEventListener(\"change\",\n            function () {\n                checkButtons();\n            }\n        );\n        if (this._selectedElementIndex.data !== null) {\n            const el = document.getElementById(this.IdFor(this._selectedElementIndex.data));\n            if (el) {\n                // @ts-ignore\n                el.checked = true;\n                checkButtons();\n            }\n        } else if (this._selectFirstAsDefault) {\n            this.ShowValue(this.value.data);\n            if (this._selectedElementIndex.data === null || this._selectedElementIndex.data === undefined) {\n                const el = document.getElementById(this.IdFor(0));\n                if (el) {\n                    // @ts-ignore\n                    el.checked = true;\n                    checkButtons();\n                }\n            }\n        }\n\n\n    };\n\n\n}","import {UIElement} from \"../UI/UIElement\";\nimport {UIEventSource} from \"../UI/UIEventSource\";\nimport {And, Tag, TagsFilter, TagUtils} from \"../Logic/TagsFilter\";\nimport {FixedUiElement} from \"../UI/Base/FixedUiElement\";\nimport {SaveButton} from \"../UI/SaveButton\";\nimport {Changes} from \"../Logic/Changes\";\nimport {VariableUiElement} from \"../UI/Base/VariableUIElement\";\nimport {TagDependantUIElement, TagDependantUIElementConstructor} from \"./UIElementConstructor\";\nimport {OnlyShowIfConstructor} from \"./OnlyShowIf\";\nimport {UserDetails} from \"../Logic/OsmConnection\";\nimport {TextField} from \"../UI/Input/TextField\";\nimport {InputElement} from \"../UI/Input/InputElement\";\nimport {InputElementWrapper} from \"../UI/Input/InputElementWrapper\";\nimport {FixedInputElement} from \"../UI/Input/FixedInputElement\";\nimport {RadioButton} from \"../UI/Input/RadioButton\";\nimport Translations from \"../UI/i18n/Translations\";\nimport Locale from \"../UI/i18n/Locale\";\n\nexport class TagRenderingOptions implements TagDependantUIElementConstructor {\n\n\n    public static inputValidation = {\n        \"$\": (str) => true,\n        \"string\": (str) => true,\n        \"int\": (str) => str.indexOf(\".\") < 0 && !isNaN(Number(str)),\n        \"nat\": (str) => str.indexOf(\".\") < 0 && !isNaN(Number(str)) && Number(str) > 0,\n        \"float\": (str) => !isNaN(Number(str)),\n    }\n\n    /**\n     * Notes: by not giving a 'question', one disables the question form alltogether\n     */\n\n    public options: {\n        priority?: number;\n        question?: string | UIElement;\n        freeform?: {\n            key: string;\n            tagsPreprocessor?: (tags: any) => any;\n            template: string | UIElement;\n            renderTemplate: string | UIElement;\n            placeholder?: string | UIElement;\n            extraTags?: TagsFilter\n        };\n        mappings?: { k: TagsFilter; txt: string | UIElement; priority?: number, substitute?: boolean }[]\n    };\n\n\n    constructor(options: {\n\n       \n\n        /**\n         * This is the string that is shown in the popup if this tag is missing.\n         *\n         * If 'question' is undefined, then the question is never asked at all\n         * If the question is \"\" (empty string) then the question is \n         */\n        question?: UIElement | string,\n\n        /**\n         * What is the priority of the question.\n         * By default, in the popup of a feature, only one question is shown at the same time. If multiple questions are unanswered, the question with the highest priority is asked first\n         */\n        priority?: number,\n\n        \n        /**\n         * Mappings convert a well-known tag combination into a user friendly text.\n         * It converts e.g. 'access=yes' into 'this area can be accessed'\n         * \n         * If there are multiple tags that should be matched, And can be used. All tags in AND will be added when the question is picked (and the corresponding text will only be shown if all tags are present).\n         * If AND is used, it is best practice to make sure every used tag is in every option (with empty string) to erase extra tags.\n         * \n         * If a 'k' is null, then this one is shown by default. It can be used to force a default value, e.g. to show that the name of a POI is not (yet) known .\n         * A mapping where 'k' is null will not be shown as option in the radio buttons.\n         * \n         * \n         */\n        mappings?: { k: TagsFilter, txt: UIElement | string, priority?: number, substitute?: boolean }[],\n\n\n        /**\n         * If one wants to render a freeform tag (thus no predefined key/values) or if there are a few well-known tags with a freeform object,\n         * use this.\n         * In the question, it'll offer a textfield\n         */\n        freeform?: {\n            key: string,\n            template: string | UIElement,\n            renderTemplate: string | UIElement\n            placeholder?: string | UIElement,\n            extraTags?: TagsFilter,\n        },\n        \n        \n        /**\n         * In some very rare cases, tags have to be rewritten before displaying\n         * This function can be used for that.\n         * This function is ran on a _copy_ of the original properties\n         */\n        tagsPreprocessor?: ((tags: any) => void)\n    }) {\n\n        this.options = options;\n    }\n\n    OnlyShowIf(tagsFilter: TagsFilter): TagDependantUIElementConstructor {\n        return new OnlyShowIfConstructor(tagsFilter, this);\n    }\n\n\n    IsQuestioning(tags: any): boolean {\n        const tagsKV = TagUtils.proprtiesToKV(tags);\n\n        for (const oneOnOneElement of this.options.mappings ?? []) {\n            if (oneOnOneElement.k === null || oneOnOneElement.k.matches(tagsKV)) {\n                return false;\n            }\n        }\n        if (this.options.freeform !== undefined && tags[this.options.freeform.key] !== undefined) {\n            return false;\n        }\n        if (this.options.question === undefined) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    construct(dependencies: { tags: UIEventSource<any>, changes: Changes }): TagDependantUIElement {\n        return new TagRendering(dependencies.tags, dependencies.changes, this.options);\n    }\n\n    IsKnown(properties: any): boolean {\n        return !this.IsQuestioning(properties);\n    }\n\n    Priority(): number {\n        return this.options.priority ?? 0;\n    }\n\n}\n\nclass TagRendering extends UIElement implements TagDependantUIElement {\n\n\n    private _userDetails: UIEventSource<UserDetails>;\n    private _priority: number;\n\n\n    private _question: UIElement;\n    private _mapping: { k: TagsFilter, txt: string | UIElement, priority?: number }[];\n\n    private _tagsPreprocessor?: ((tags: any) => any);\n    private _freeform: {\n        key: string, \n        template: string | UIElement,\n        renderTemplate: string | UIElement,\n        placeholder?: string | UIElement,\n        extraTags?: TagsFilter\n    };\n\n\n    private readonly _questionElement: InputElement<TagsFilter>;\n\n    private readonly _saveButton: UIElement;\n    private readonly _skipButton: UIElement;\n    private readonly _editButton: UIElement;\n\n    private readonly _questionSkipped: UIEventSource<boolean> = new UIEventSource<boolean>(false);\n\n    private readonly _editMode: UIEventSource<boolean> = new UIEventSource<boolean>(false);\n\n\n    constructor(tags: UIEventSource<any>, changes: Changes, options: {\n        priority?: number\n\n        question?: string | UIElement,\n\n        freeform?: {\n            key: string, \n            template: string | UIElement,\n            renderTemplate: string | UIElement,\n            placeholder?: string | UIElement,\n            extraTags?: TagsFilter,\n        },\n        tagsPreprocessor?: ((tags: any) => any),\n        mappings?: { k: TagsFilter, txt: string | UIElement, priority?: number, substitute?: boolean }[]\n    }) {\n        super(tags);\n        this.ListenTo(Locale.language);\n        const self = this;\n        this.ListenTo(this._questionSkipped);\n        this.ListenTo(this._editMode);\n\n        this._userDetails = changes.login.userDetails;\n        this.ListenTo(this._userDetails);\n\n        if (options.question !== undefined) {\n            this._question = Translations.W(options.question);\n        }\n        this._priority = options.priority ?? 0;\n        this._tagsPreprocessor = function (properties) {\n            if (options.tagsPreprocessor === undefined) {\n                return properties;\n            }\n            const newTags = {};\n            for (const k in properties) {\n                newTags[k] = properties[k];\n            }\n            options.tagsPreprocessor(newTags);\n            return newTags;\n        };\n        \n        this._mapping = [];\n        this._freeform = options.freeform;\n\n\n        for (const choice of options.mappings ?? []) {\n            let choiceSubbed = {\n                k: choice.k,\n                txt: choice.txt,\n                priority: choice.priority\n            };\n\n            if (choice.substitute) {\n                choiceSubbed = {\n                    k: choice.k.substituteValues(\n                        options.tagsPreprocessor(this._source.data)),\n                    txt: choice.txt,\n                    priority: choice.priority\n                }\n            }\n\n\n            this._mapping.push({\n                k: choiceSubbed.k,\n                txt: choiceSubbed.txt\n            });\n        }\n\n\n        // Prepare the actual input element -> pick an appropriate implementation\n\n        this._questionElement = this.InputElementFor(options);\n        const save = () => {\n            const selection = self._questionElement.GetValue().data;\n            if (selection) {\n                changes.addTag(tags.data.id, selection);\n            }\n            self._editMode.setData(false);\n        }\n\n        const cancel = () => {\n            self._questionSkipped.setData(true);\n            self._editMode.setData(false);\n            self._source.ping(); // Send a ping upstream to render the next question\n        }\n\n        // Setup the save button and it's action\n        this._saveButton = new SaveButton(this._questionElement.GetValue())\n            .onClick(save);\n\n        this._editButton = new FixedUiElement(\"\");\n        if (this._question !== undefined) {\n            this._editButton = new FixedUiElement(\"<img class='editbutton' src='./assets/pencil.svg' alt='edit'>\")\n                .onClick(() => {\n                    self._editMode.setData(true);\n                    self._questionElement.GetValue().setData(self.CurrentValue());\n                });\n        }\n\n\n        const cancelContents = this._editMode.map((isEditing) => {\n            if (isEditing) {\n                return \"<span class='skip-button'>\"+Translations.t.general.cancel.R()+\"</span>\";\n            } else {\n                return \"<span class='skip-button'>\"+Translations.t.general.skip.R()+\"</span>\";\n            }\n        }, [Locale.language]);\n        // And at last, set up the skip button\n        this._skipButton = new VariableUiElement(cancelContents).onClick(cancel)    ;\n    }\n\n\n    private InputElementFor(options: {\n        freeform?: {\n            key: string, \n            template: string | UIElement,\n            renderTemplate: string | UIElement,\n            placeholder?: string | UIElement,\n            extraTags?: TagsFilter,\n        },\n        mappings?: { k: TagsFilter, txt: string | UIElement, priority?: number, substitute?: boolean }[]\n    }):\n        InputElement<TagsFilter> {\n\n        const elements = [];\n\n        if (options.mappings !== undefined) {\n            \n            const previousTexts= [];\n            for (const mapping of options.mappings) {\n                if(mapping.k === null){\n                    continue;\n                }\n                if(previousTexts.indexOf(mapping.txt) >= 0){\n                    continue;\n                }\n                previousTexts.push(mapping.txt);\n                \n                elements.push(this.InputElementForMapping(mapping));\n            }\n        }\n\n        if (options.freeform !== undefined) {\n            elements.push(this.InputForFreeForm(options.freeform));\n        }\n\n\n        if (elements.length == 0) {\n            console.warn(\"WARNING: no tagrendering with following options:\", options);\n            return new FixedInputElement(\"This should not happen: no tag renderings defined\", undefined);\n        }\n        if (elements.length == 1) {\n            return elements[0];\n        }\n\n        return new RadioButton(elements, false);\n\n    }\n\n\n    private InputElementForMapping(mapping: { k: TagsFilter, txt: string | UIElement }) {\n        return new FixedInputElement(mapping.txt, mapping.k);\n    }\n\n\n    private InputForFreeForm(freeform): InputElement<TagsFilter> {\n        if (freeform === undefined) {\n            return undefined;\n        }\n\n        const prepost = Translations.W(freeform.template).InnerRender().split(\"$\");\n        const type = prepost[1];\n        const isValid = TagRenderingOptions.inputValidation[type];\n\n        const pickString =\n            (string: any) => {\n                if (string === \"\" || string === undefined) {\n                    return undefined;\n                }\n                if (!isValid(string)) {\n                    return undefined;\n                }\n                const tag = new Tag(freeform.key, string);\n                \n                if (freeform.extraTags === undefined) {\n                    return tag;\n                }\n                return new And([\n                        tag,\n                        freeform.extraTags\n                    ]\n                );\n            };\n\n        const toString =\n            (tag) => {\n                if (tag instanceof And) {\n                    return toString(tag.and[0])\n                } else if (tag instanceof Tag) {\n                    return tag.value\n                }\n                return undefined;\n            }\n\n\n        let inputElement: InputElement<TagsFilter>;\n        const textField = new TextField({\n            placeholder: this._freeform.placeholder,\n            fromString: pickString,\n            toString: toString\n        });\n\n        return new InputElementWrapper(prepost[0], textField, prepost[2]);\n    }\n\n\n    IsKnown(): boolean {\n        const tags = TagUtils.proprtiesToKV(this._source.data);\n\n        for (const oneOnOneElement of this._mapping) {\n            if (oneOnOneElement.k === null || oneOnOneElement.k.matches(tags)) {\n                return true;\n            }\n        }\n\n        return this._freeform !== undefined && this._source.data[this._freeform.key] !== undefined;\n    }\n\n    IsSkipped(): boolean {\n        return this._questionSkipped.data;\n    }\n\n    private CurrentValue(): TagsFilter {\n        const tags = TagUtils.proprtiesToKV(this._source.data);\n\n        for (const oneOnOneElement of this._mapping) {\n            if (oneOnOneElement.k !== null && oneOnOneElement.k.matches(tags)) {\n                return oneOnOneElement.k;\n            }\n        }\n        if (this._freeform === undefined) {\n            return undefined;\n        }\n\n        return new Tag(this._freeform.key, this._source.data[this._freeform.key]);\n    }\n\n\n    IsQuestioning(): boolean {\n        if (this.IsKnown()) {\n            return false;\n        }\n        if (this._question === undefined) {\n            // We don't ask this question in the first place\n            return false;\n        }\n        if (this._questionSkipped.data) {\n            // We don't ask for this question anymore, skipped by user\n            return false;\n        }\n        return true;\n    }\n\n    private RenderAnwser(): UIElement {\n        const tags = TagUtils.proprtiesToKV(this._source.data);\n\n        let freeform: UIElement = new FixedUiElement(\"\");\n        let freeformScore = -10;\n        if (this._freeform !== undefined && this._source.data[this._freeform.key] !== undefined) {\n            freeform = this.ApplyTemplate(this._freeform.renderTemplate);\n            freeformScore = 0;\n        }\n\n\n        let highestScore = -100;\n        let highestTemplate = undefined;\n        for (const oneOnOneElement of this._mapping) {\n            if (oneOnOneElement.k == null ||\n                oneOnOneElement.k.matches(tags)) {\n                // We have found a matching key -> we use the template, but only if it scores better\n                let score = oneOnOneElement.priority ??\n                    (oneOnOneElement.k === null ? -1 : 0);\n                if (score > highestScore) {\n                    highestScore = score;\n                    highestTemplate = oneOnOneElement.txt\n                }\n            }\n        }\n\n        if (freeformScore > highestScore) {\n            return freeform;\n        }\n\n        if (highestTemplate !== undefined) {\n            // we render the found template\n            return this.ApplyTemplate(highestTemplate);\n        }\n\n\n    }\n\n    InnerRender(): string {\n        if (this.IsQuestioning() || this._editMode.data) {\n            // Not yet known or questioning, we have to ask a question\n\n            const question = this._question.Render();\n\n            return \"<div class='question'>\" +\n                \"<span class='question-text'>\" + question + \"</span>\" +\n                (this._question.IsEmpty() ? \"\" : \"<br/>\") +\n                \"<div>\" + this._questionElement.Render() + \"</div>\" +\n                this._skipButton.Render() +\n                this._saveButton.Render() +\n                \"</div>\"\n        }\n\n        if (this.IsKnown()) {\n            const answer = this.RenderAnwser()\n            if (answer.IsEmpty()) {\n                return \"\";\n            }\n            const html = answer.Render();\n            let editButton = \"\";\n            if (this._userDetails.data.loggedIn && this._question !== undefined) {\n                editButton = this._editButton.Render();\n            }\n\n            return \"<span class='answer'>\" +\n                \"<span class='answer-text'>\" + html + \"</span>\" +\n                editButton +\n                \"</span>\";\n        }\n\n        return \"\";\n\n    }\n\n\n    Priority(): number {\n        return this._priority;\n    }\n\n    private ApplyTemplate(template: string | UIElement): UIElement {\n        if(template === undefined || template === null){\n            throw \"Trying to apply a template, but the template is null/undefined\"\n        }\n        const tags = this._tagsPreprocessor(this._source.data);\n        if (template instanceof UIElement) {\n            template = template.Render();\n        }\n        return new FixedUiElement(TagUtils.ApplyTemplate(template, tags));\n    }\n\n\n    InnerUpdate(htmlElement: HTMLElement) {\n        super.InnerUpdate(htmlElement);\n        this._questionElement.Update(); // Another manual update for them\n    }\n\n}","export class Img {\n\n    static osmAbstractLogo: string =\n        \"<svg class='osm-logo' xmlns=\\\"http://www.w3.org/2000/svg\\\" height=\\\"24px\\\" width=\\\"24px\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 66 64\\\">\" +\n        \"    <g transform=\\\"translate(-0.849, -61)\\\">\\n\" +\n        \"    <path d=\\\"M0.849,61 L6.414,75.609 L0.849,90.217 L6.414,104.826 L0.849,119.435 L4.266,120.739 L22.831,102.183 L26.162,102.696 L30.205,98.652 C27.819,95.888 26.033,92.59 25.057,88.948 L26.953,87.391 C26.627,85.879 26.449,84.313 26.449,82.704 C26.449,74.67 30.734,67.611 37.136,63.696 L30.066,61 L15.457,66.565 L0.849,61 z\\\"></path>\" +\n        \"        <path d=\\\"M48.71,64.617 C48.406,64.617 48.105,64.629 47.805,64.643 C47.52,64.657 47.234,64.677 46.953,64.704 C46.726,64.726 46.499,64.753 46.275,64.783 C46.039,64.814 45.811,64.847 45.579,64.887 C45.506,64.9 45.434,64.917 45.362,64.93 C45.216,64.958 45.072,64.987 44.927,65.017 C44.812,65.042 44.694,65.06 44.579,65.087 C44.442,65.119 44.307,65.156 44.17,65.191 C43.943,65.25 43.716,65.315 43.492,65.383 C43.323,65.433 43.155,65.484 42.988,65.539 C42.819,65.595 42.65,65.652 42.483,65.713 C42.475,65.716 42.466,65.719 42.457,65.722 C35.819,68.158 31.022,74.369 30.649,81.774 C30.633,82.083 30.622,82.391 30.622,82.704 C30.622,83.014 30.631,83.321 30.649,83.626 C30.649,83.629 30.648,83.632 30.649,83.635 C30.662,83.862 30.681,84.088 30.701,84.313 C31.466,93.037 38.377,99.948 47.101,100.713 C47.326,100.733 47.552,100.754 47.779,100.765 C47.782,100.765 47.785,100.765 47.788,100.765 C48.093,100.783 48.399,100.791 48.709,100.791 C53.639,100.791 58.096,98.833 61.353,95.652 C61.532,95.477 61.712,95.304 61.883,95.122 C61.913,95.09 61.941,95.058 61.97,95.026 C61.98,95.015 61.987,95.002 61.996,94.991 C62.132,94.845 62.266,94.698 62.396,94.548 C62.449,94.487 62.501,94.426 62.553,94.365 C62.594,94.316 62.634,94.267 62.675,94.217 C62.821,94.04 62.961,93.861 63.101,93.678 C63.279,93.444 63.456,93.199 63.622,92.956 C63.956,92.471 64.267,91.97 64.553,91.452 C64.661,91.257 64.757,91.06 64.857,90.861 C64.89,90.796 64.93,90.735 64.962,90.67 C64.98,90.633 64.996,90.594 65.014,90.556 C65.125,90.324 65.234,90.09 65.336,89.852 C65.349,89.82 65.365,89.789 65.379,89.756 C65.48,89.517 65.575,89.271 65.666,89.026 C65.678,88.994 65.689,88.962 65.701,88.93 C65.792,88.679 65.881,88.43 65.962,88.174 C65.97,88.148 65.98,88.122 65.988,88.096 C66.069,87.832 66.144,87.564 66.214,87.296 C66.219,87.275 66.226,87.255 66.231,87.235 C66.301,86.962 66.365,86.686 66.423,86.409 C66.426,86.391 66.428,86.374 66.431,86.356 C66.445,86.291 66.453,86.223 66.466,86.156 C66.511,85.925 66.552,85.695 66.588,85.461 C66.632,85.169 66.671,84.878 66.701,84.583 C66.701,84.574 66.701,84.565 66.701,84.556 C66.731,84.258 66.755,83.955 66.77,83.652 C66.77,83.646 66.77,83.641 66.77,83.635 C66.786,83.326 66.797,83.017 66.797,82.704 C66.797,72.69 58.723,64.617 48.71,64.617 z\\\"></path>\" +\n        \"        <path d=\\\"M62.936,99.809 C59.074,103.028 54.115,104.965 48.71,104.965 C47.101,104.965 45.535,104.787 44.023,104.461 L42.466,106.357 C39.007,105.43 35.855,103.781 33.179,101.574 L28.996,105.765 L29.51,108.861 L13.953,124.426 L15.457,125 L30.066,119.435 L44.675,125 L59.283,119.435 L64.849,104.826 L62.936,99.809 z\\\"></path>\" +\n        \"        </g>\" +\n        \"</svg>\";\n\n\n    static closedFilterButton: string = `<svg width=\"27\" height=\"27\" viewBox=\"0 0 27 27\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M26.5353 8.13481C26.4422 8.35428 26.2683 8.47598 26.0632 8.58537C21.9977 10.7452 17.935 12.9085 13.8758 15.0799C13.6475 15.2016 13.4831 15.1962 13.2568 15.0751C9.19822 12.903 5.13484 10.7404 1.07215 8.5758C0.490599 8.26608 0.448478 7.52562 0.991303 7.13796C1.0803 7.07438 1.17813 7.0231 1.2746 6.97045C5.15862 4.86462 9.04536 2.7629 12.9246 0.648187C13.3805 0.399316 13.7779 0.406837 14.2311 0.65434C18.0954 2.76153 21.9658 4.85779 25.8383 6.94926C26.1569 7.12155 26.411 7.32872 26.5353 7.67604C26.5353 7.82919 26.5353 7.98166 26.5353 8.13481Z\" fill=\"#003B8B\"/>\n        <path d=\"M13.318 26.535C12.1576 25.9046 10.9972 25.2736 9.83614 24.6439C6.96644 23.0877 4.09674 21.533 1.22704 19.9762C0.694401 19.6876 0.466129 19.2343 0.669943 18.7722C0.759621 18.5691 0.931505 18.3653 1.11969 18.2512C1.66659 17.9182 2.23727 17.6228 2.80863 17.3329C2.89423 17.2892 3.04981 17.3206 3.14493 17.3712C6.40799 19.1031 9.66969 20.837 12.9239 22.5845C13.3703 22.8238 13.7609 22.83 14.208 22.59C17.4554 20.8472 20.7117 19.1202 23.9605 17.3801C24.1493 17.2789 24.2838 17.283 24.4632 17.3876C24.8926 17.6386 25.3301 17.8772 25.7751 18.1001C26.11 18.2683 26.3838 18.4857 26.5346 18.8385C26.5346 18.9916 26.5346 19.1441 26.5346 19.2972C26.4049 19.6528 26.1399 19.8613 25.8152 20.0363C22.9964 21.5549 20.1831 23.0829 17.3684 24.609C16.1863 25.2496 15.0055 25.893 13.8248 26.535C13.6556 26.535 13.4865 26.535 13.318 26.535Z\" fill=\"#003B8B\"/>\n        <path d=\"M26.3988 13.7412C26.2956 13.9661 26.1026 14.081 25.8927 14.1924C21.8198 16.3577 17.749 18.5258 13.6815 20.7013C13.492 20.8025 13.3602 20.7902 13.1795 20.6938C9.09638 18.5114 5.01059 16.3359 0.924798 14.1582C0.399637 13.8786 0.307921 13.2646 0.735251 12.838C0.829005 12.7443 0.947217 12.6705 1.06407 12.6055C1.56545 12.3279 2.07635 12.0654 2.57297 11.7789C2.74214 11.6812 2.86579 11.6921 3.03291 11.7817C6.27492 13.5155 9.52303 15.2378 12.761 16.9792C13.2352 17.2343 13.6394 17.2322 14.1129 16.9772C17.3509 15.2358 20.5996 13.5142 23.8416 11.7796C24.0095 11.69 24.1338 11.6818 24.3016 11.7789C24.7384 12.0339 25.1821 12.2794 25.6352 12.5037C25.9701 12.6691 26.2426 12.8831 26.3995 13.2304C26.3988 13.4014 26.3988 13.5716 26.3988 13.7412Z\" fill=\"#003B8B\"/>\n        </svg>  `\n    \n    static openFilterButton: string = `<svg width=\"22\" height=\"22\" viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M20 2L2 20M20 20L2 2\" stroke=\"#003B8B\" stroke-width=\"4\"/>\n</svg>  `\n    \n}\n\n","import {TagRenderingOptions} from \"../TagRendering\";\nimport {Img} from \"../../UI/Img\";\nimport {Tag} from \"../../Logic/TagsFilter\";\n\n\nexport class OsmLink extends TagRenderingOptions {\n\n  \n\n    static options = {\n        freeform: {\n            key: \"id\",\n            template: \"$$$\",\n            renderTemplate:\n                \"<span class='osmlink'><a href='https://osm.org/{id}' target='_blank'>\" +\n                Img.osmAbstractLogo +\n                \"</a></span>\",\n            placeholder: \"\",\n        },\n        mappings: [\n            {k: new Tag(\"id\", \"node/-1\"), txt: \"<span class='alert'>Uploading</span>\"}\n        ]\n\n    }\n\n    constructor() {\n        super(OsmLink.options);\n    }\n\n\n}","import {TagRenderingOptions} from \"../TagRendering\";\n\n\nexport class WikipediaLink extends TagRenderingOptions {\n\n    private static FixLink(value: string): string {\n        if (value === undefined) {\n            return undefined;\n        }\n        // @ts-ignore\n        if (value.startsWith(\"https\")) {\n            return value;\n        } else {\n\n            const splitted = value.split(\":\");\n            const language = splitted[0];\n            splitted.shift();\n            const page = splitted.join(\":\");\n            return 'https://' + language + '.wikipedia.org/wiki/' + page;\n        }\n    }\n\n    static options = {\n        priority: 10,\n        // question: \"Wat is het overeenstemmende wkipedia-artikel?\",\n        tagsPreprocessor: (tags) => {\n            if (tags.wikipedia !== undefined) {\n                tags.wikipedia = WikipediaLink.FixLink(tags.wikipedia);\n            }\n        },\n        freeform: {\n            key: \"wikipedia\",\n            template: \"$$$\",\n            renderTemplate:\n                \"<span class='wikipedialink'>\" +\n                \"<a href='{wikipedia}' target='_blank'>\" +\n                \"<img width='64px' src='./assets/wikipedia.svg' alt='wikipedia'>\" +\n                \"</a></span>\",\n            placeholder: \"\"\n\n        },\n\n    }\n\n    constructor() {\n        super(WikipediaLink.options);\n    }\n\n\n}","import {UIElement} from \"./UIElement\";\nimport {UIEventSource} from \"./UIEventSource\";\nimport {QuestionPicker} from \"./QuestionPicker\";\nimport {OsmImageUploadHandler} from \"../Logic/OsmImageUploadHandler\";\nimport {ImageCarousel} from \"./Image/ImageCarousel\";\nimport {Changes} from \"../Logic/Changes\";\nimport {UserDetails} from \"../Logic/OsmConnection\";\nimport {VerticalCombine} from \"./Base/VerticalCombine\";\nimport {TagRenderingOptions} from \"../Customizations/TagRendering\";\nimport {OsmLink} from \"../Customizations/Questions/OsmLink\";\nimport {WikipediaLink} from \"../Customizations/Questions/WikipediaLink\";\nimport {And} from \"../Logic/TagsFilter\";\nimport {TagDependantUIElement, TagDependantUIElementConstructor} from \"../Customizations/UIElementConstructor\";\nimport Translations from \"./i18n/Translations\";\n\nexport class FeatureInfoBox extends UIElement {\n\n    /**\n     * The actual GEOJSON-object, with geometry and stuff\n     */\n    private _feature: any;\n    /**\n     * The tags, wrapped in a global event source\n     */\n    private _tagsES: UIEventSource<any>;\n    private _changes: Changes;\n    private _userDetails: UIEventSource<UserDetails>;\n\n\n    private _title: UIElement;\n    private _osmLink: UIElement;\n    private _wikipedialink: UIElement;\n\n\n    private _infoboxes: TagDependantUIElement[];\n    private _questions: QuestionPicker;\n\n    private _oneSkipped = Translations.t.general.oneSkippedQuestion.Clone();\n    private _someSkipped = Translations.t.general.skippedQuestions.Clone();\n\n    constructor(\n        feature: any,\n        tagsES: UIEventSource<any>,\n        title: TagRenderingOptions | UIElement,\n        elementsToShow: TagDependantUIElementConstructor[],\n        changes: Changes,\n        userDetails: UIEventSource<UserDetails>\n    ) {\n        super(tagsES);\n        this._feature = feature;\n        this._tagsES = tagsES;\n        this._changes = changes;\n        this._userDetails = userDetails;\n        this.ListenTo(userDetails);\n\n        const deps = {tags: this._tagsES, changes: this._changes}\n\n        this._infoboxes = [];\n        elementsToShow = elementsToShow ?? []\n\n        const self = this;\n        for (const tagRenderingOption of elementsToShow) {\n            self._infoboxes.push(\n                tagRenderingOption.construct(deps));\n        }\n        function initTags() {\n            self._infoboxes = []\n            for (const tagRenderingOption of elementsToShow) {\n                self._infoboxes.push(\n                    tagRenderingOption.construct(deps));\n            }\n            self.Update();\n        }\n\n        this._someSkipped.onClick(initTags)\n        this._oneSkipped.onClick(initTags)\n\n\n        title = title ?? new TagRenderingOptions(\n            {\n                mappings: [{k: new And([]), txt: \"\"}]\n            }\n        )\n\n        if (title instanceof UIElement) {\n            this._title = title;\n        } else {\n            this._title = new TagRenderingOptions(title.options).construct(deps);\n        }\n        this._osmLink = new OsmLink().construct(deps);\n        this._wikipedialink = new WikipediaLink().construct(deps);\n\n\n    }\n\n    InnerRender(): string {\n\n\n        const info = [];\n        const questions: TagDependantUIElement[] = [];\n        let skippedQuestions = 0;\n        for (const infobox of this._infoboxes) {\n            if (infobox.IsKnown()) {\n                info.push(infobox);\n            } else if (infobox.IsQuestioning()) {\n                questions.push(infobox);\n            } else if(infobox.IsSkipped()){\n                // This question is neither known nor questioning -> it was skipped\n                skippedQuestions++;\n            }\n\n        }\n\n        let questionsHtml = \"\";\n\n        if (this._userDetails.data.loggedIn && questions.length > 0) {\n            // We select the most important question and render that one\n            let mostImportantQuestion;\n            let score = -1000;\n            for (const question of questions) {\n\n                if (mostImportantQuestion === undefined || question.Priority() > score) {\n                    mostImportantQuestion = question;\n                    score = question.Priority();\n                }\n            }\n\n            questionsHtml = mostImportantQuestion.Render();\n        } else if (skippedQuestions == 1) {\n            questionsHtml = this._oneSkipped.Render();\n        } else if (skippedQuestions > 0) {\n            questionsHtml = this._someSkipped.Render();\n        }\n\n        return \"<div class='featureinfobox'>\" +\n            \"<div class='featureinfoboxtitle'>\" +\n            \"<span>\" +\n            this._title.Render() +\n            \"</span>\" +\n            this._wikipedialink.Render() +\n            this._osmLink.Render() +\n            \"</div>\" +\n\n            \"<div class='infoboxcontents'>\" +\n            new VerticalCombine(info, \"infobox-information \").Render() +\n\n            questionsHtml +\n\n\n            \"</div>\" +\n            \"\" +\n            \"</div>\";\n    }\n    \n    \n\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}