{"version":3,"sources":["UI/UIEventSource.ts","UI/UIElement.ts","UI/AddButton.ts"],"names":[],"mappings":";;;;;;;ACGA,ADHA,ICGA,ADHA,SCGA,IDHA;ACGA,ADHA;ACGA,ADHA,YCGA,ADHA;ACYI,ADPA,WCOA,ADPA,SCOA,CAAsB,GDPtB,CAAY,ECOZ,EAAgD,ADPhD,EAAmB;ACKX,ADPA,SCOA,ADPA,UAAA,ECOA,CDPa,ECOE,ADPf,KCOA;AAGJ,ADPA,SCOK,ADPA,ECOL,EDPA,CCOU,EDPE,IAAZ,UCO0B,SAAS,CAAC,MAApC;AACA,ADPH,SCOQ,OAAL,GAAe,MAAf;AACA,IAAA,SAAS,CAAC,MAAV;AACA,ADNG,EAAA,OCME,MDNF,CAAA,CCMH,CAAc,MAAd,CDNG,CAAA,WAAA,GAAP,UAAmB,QAAnB,EAAuD;ACOtD,ADNG,SAAK,UAAL,CAAgB,IAAhB,CAAqB,QAArB;;ACSM,ADRN,ECQM,SAAA,ADRC,CCQD,GDRN,MCQM,CAAA,QAAA,GAAV,UAAmB,MAAnB,EAA6C;AACzC,ADRH,GAHM,KCWC,MAAM,KAAK,SAAf,EAA0B;AACtB;AACH,ADRE,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAAmB;AACf,QAAI,KAAK,IAAL,KAAc,CAAlB,EAAqB;ACQrB,ADPI,QCOE,IAAI,GAAG,IAAb;AACA,ADPC,ICOD,MAAM,CAAC,WAAP,CAAmB,YAAA;AACf,MAAA,IAAI,CAAC,MAAL;AACH,ADRD,KCMA,IDNK,IAAL,GAAY,CAAZ;ACSH,ADRG,GCAM,MDAD,IAAL;AACH,GANM;ACiBA,EAAA,SAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAA8B;AAC1B,ADVG,EAAA,OCUE,MDVF,CAAA,CCUH,GAAgB,CAAhB,IDVG,CAAA,IAAA,GAAP,YAAA;ACWI,ADVA,SCUK,ADVA,IAAI,CAAT,CCUA,GDVc,KAAK,UAAnB,EAA+B;ACWlC,ADVO,GCOD,QDPM,UAAL,CAAgB,CAAhB,EAAmB,KAAK,IAAxB;AEzBZ,AF0BS,IE1BT,eAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;ADqCI,ADVC,ECUD,CDdO,QCcP,CAAA,SAAA,CAAA,MAAA,GAAA,YAAA;ACpCJ,ADqCQ,ICrCR,IDqCY,OCrCZ,ADqCmB,GCrCnB,ADqCsB,OCrCtB,CAAA,ADqC8B,CAAC,YCrC/B,CAAA,CDqCsB,CAAwB,KAAK,EAA7B,CAAd;ADTG,EAAA,aAAA,CAAA,SAAA,CAAA,GAAA,GAAP,UAAc,CAAd,EAA2B;AErB/B,AD+BQ,ADTA,IEtBR,ID+BY,ADTE,IAAI,CEtBlB,ED+BmB,ADTE,IAAb,CCSgB,IAAZ,IAAoB,OAAO,KAAK,SAApC,EAA+C;AC/BvD,ADgCY,ADTJ,SAAK,WAAL,CAAiB,YAAA;AEvBzB,ADiCY,ADTA,MAAA,IExBZ,KFwBqB,CExBrB,AFwBsB,EExBtB,KFwBY,CAAkB,CAAC,CAAC,IAAI,CAAC,IAAN,CAAnB;AExBmB,ADkCtB,ADTG,EEzBmB,IFyBnB,KEzBmB,CAAA,GFyBV,CAAC,IAAV,CEzBmB,EAAA,MAAA,CAAA;AF0BtB,KAHD;AEHJ,ADgBI,ADTA,ICSA,IDTM,GEPV,ADgBW,CAAC,KDTO,GEPnB,AFOsB,CENlB,ADeA,GAAoB,ADTE,IEP1B,CDgB6B,CCdzB,OAFJ,AFOsB,CACd,CELJ,AFKK,CCQe,ADRd,ECQN,GDRW,CERf,EAQO,CFAE,CADa,CAAlB;AEPJ,AFWI,QEXJ,GFWW,EEXX,GASI,IFEA,EEFA,CAAA,IAAA,CAAA,IAAA,EAAM,SAAN,KAAgB,IATpB;ADiBI,ADJH,GAZM,KCgBC,KAAK,YAAT,EAAuB;ACnCpB,ADoCC,ICpCD,KAAA,CAAA,ADoCK,OAAO,CAAC,SAAR,CCpCL,GAA4C,CDoCjB,EAA1B,CCpC+C,CDoCjB,cCpCiB,CAAA,aAAJ,CAA0B,EAA1B,CAA5C;AAGU,ADkCL,ADHhB,IE/BqB,IDkCL,CClCK,AF+BrB,CE/BqB,KDkCE,CAAC,MDHxB,CE/BqB,GAAgB,GDkCrB,CAAsB,KAAtB,CAA4B,KClCvB,EDkCL,GAAsC,MAAtC;ACjCK,ADkCR,ADhDb,CAAA,EAAA,CEcqB,GDgCT,EChCS,CAAA,GDkCF,QClCE,GAAc,aAAd;AAIjB,AD+BY,QAAA,OAAO,CAAC,aAAR,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,SAAtC;AACH,ADlDA,OAAA,CAAA,aAAA,GAAA,aAAA;AC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","file":"AddButton.js","sourceRoot":"..","sourcesContent":["export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (let i in this._callbacks) {\n            this._callbacks[i](this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J)): UIEventSource<J> {\n        const self = this;\n        this.addCallback(function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        });\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n\n        return newSource;\n\n    }\n\n\n}","import {UIEventSource} from \"./UIEventSource\";\nimport {Playground} from \"../Layers/Playground\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    protected ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            console.log(\"Registering\")\n            const self = this;\n            element.onclick = () => {\n                console.log(\"Clicked!\")\n                self._onClick();\n            }\n            element.style.cursor = \"pointer\";\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","import {UIEventSource} from \"./UIEventSource\";\nimport {UIElement} from \"./UIElement\";\nimport {Basemap} from \"../Logic/Basemap\";\nimport {Changes} from \"../Logic/Changes\";\nimport L from \"leaflet\";\nimport {Tag} from \"../Logic/TagsFilter\";\nimport {FilteredLayer} from \"../Logic/FilteredLayer\";\n\nexport class AddButton extends UIElement {\n\n    public curentAddSelection: UIEventSource<string> = new UIEventSource<string>(\"\");\n    private zoomlevel: UIEventSource<{ zoom: number }>;\n\n    private readonly SELECTING_POI = \"selecting_POI\";\n    private readonly PLACING_POI = \"placing_POI\";\n\n    private changes: Changes;\n\n    /*State is one of:\n     * \"\": the default stated\n     * \"select_POI\": show a 'select which POI to add' query (skipped if only one option exists)\n     * \"placing_point\": shown while adding a point\n     * \"\"\n     */\n    private state: UIEventSource<string> = new UIEventSource<string>(\"\");\n    private _options: { name: string; icon: string; tags: Tag[]; layerToAddTo: FilteredLayer }[];\n\n\n    constructor(\n        basemap: Basemap,\n        changes: Changes,\n        options: {\n            name: string,\n            icon: string,\n            tags: Tag[],\n            layerToAddTo: FilteredLayer\n        }[]) {\n        super(undefined);\n\n        this.zoomlevel = basemap.Location;\n        this.ListenTo(this.zoomlevel);\n        this._options = options;\n        this.ListenTo(this.curentAddSelection);\n        this.ListenTo(this.state);\n        this.state.setData(this.SELECTING_POI);\n        this.changes = changes;\n\n        const self = this;\n\n\n        basemap.map.on(\"click\", function (e) {\n                const location = e.latlng;\n                console.log(\"Clicked at \", location)\n                self.HandleClick(location.lat, location.lng)\n            }\n        );\n        \n        basemap.map.on(\"mousemove\", function(){\n            if (self.state.data === self.PLACING_POI) {\n\n                let icon = \"crosshair\";\n                for (const option of self._options) {\n                    if (option.name === self.curentAddSelection.data && option.icon !== undefined) {\n                        icon = 'url(\"' + option.icon + '\") 32 32 ,crosshair';\n                        console.log(\"Cursor icon: \", icon)\n                    }\n                }\n                document.getElementById('leafletDiv').style.cursor = icon;\n\n            } else {\n                // @ts-ignore\n                document.getElementById('leafletDiv').style.cursor = '';\n            }\n        });\n\n\n    }\n\n    private HandleClick(lat: number, lon: number): void {\n        this.state.setData(this.SELECTING_POI);\n        console.log(\"Handling click\", lat, lon, this.curentAddSelection.data);\n        for (const option of this._options) {\n            if (this.curentAddSelection.data === option.name) {\n                console.log(\"PLACING a \", option);\n\n                let feature = this.changes.createElement(option.tags, lat, lon);\n                option.layerToAddTo.AddNewElement(feature);\n\n                return;\n            }\n        }\n    }\n\n    protected InnerRender(): string {\n\n        if (this.zoomlevel.data.zoom < 19) {\n            return \"Zoom in om een punt toe te voegen\"\n        }\n\n        if (this.state.data === this.SELECTING_POI) {\n            var html = \"<form>\";\n            for (const option of this._options) {\n                // <button type='button'> looks SO retarded\n                // the default type of button is 'submit', which performs a POST and page reload\n                html += \"<button type='button' class='addPOIoption' value='\" + option.name + \"'>Voeg een \" + option.name + \" toe</button><br/>\";\n            }\n            html += \"</form>\";\n            return html;\n        }\n\n        if (this.state.data === this.PLACING_POI) {\n            return \"<div id='clickOnMapInstruction'>Klik op de kaart om een nieuw punt toe te voegen<div>\" +\n                \"<div id='cancelInstruction'>Klik hier om toevoegen te annuleren</div>\"\n        }\n\n        if (this.curentAddSelection.data === \"\") {\n            return \"<span onclick>Voeg een punt toe...</span>\"\n        }\n        return \"Annuleer\";\n    }\n\n    InnerUpdate(htmlElement: HTMLElement) {\n        const self = this;\n\n        htmlElement.onclick = function (event) {\n            if(event.consumed){\n                return;\n            }\n            if (self.state.data === self.PLACING_POI) {\n                self.state.setData(self.SELECTING_POI);\n            }\n\n        }\n\n        const buttons = htmlElement.getElementsByClassName('addPOIoption');\n        // @ts-ignore\n        for (const button of buttons) {\n            button.onclick = function (event) {\n                self.curentAddSelection.setData(button.value);\n                self.state.setData(self.PLACING_POI);\n                event.consumed = true;\n            }\n        }\n    }\n\n\n}"]}