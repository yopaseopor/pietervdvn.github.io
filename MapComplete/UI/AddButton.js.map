{"version":3,"sources":["UI/UIEventSource.ts","UI/UIElement.ts","UI/AddButton.ts"],"names":[],"mappings":"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","file":"AddButton.js","sourceRoot":"..","sourcesContent":["export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J)): UIEventSource<J> {\n        const self = this;\n        this.addCallback(function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        });\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n\n        return newSource;\n\n    }\n\n\n}","import {UIEventSource} from \"./UIEventSource\";\nimport {Playground} from \"../Layers/Playground\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    protected ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = () => {\n                self._onClick();\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","import {UIEventSource} from \"./UIEventSource\";\nimport {UIElement} from \"./UIElement\";\nimport {Basemap} from \"../Logic/Basemap\";\nimport {Changes} from \"../Logic/Changes\";\nimport L from \"leaflet\";\nimport {Tag} from \"../Logic/TagsFilter\";\nimport {FilteredLayer} from \"../Logic/FilteredLayer\";\n\nexport class AddButton extends UIElement {\n\n    public curentAddSelection: UIEventSource<string> = new UIEventSource<string>(\"\");\n    private zoomlevel: UIEventSource<{ zoom: number }>;\n\n    private readonly SELECTING_POI = \"selecting_POI\";\n    private readonly PLACING_POI = \"placing_POI\";\n\n    private changes: Changes;\n\n    /*State is one of:\n     * \"\": the default stated\n     * \"select_POI\": show a 'select which POI to add' query (skipped if only one option exists)\n     * \"placing_point\": shown while adding a point\n     * \"\"\n     */\n    private state: UIEventSource<string> = new UIEventSource<string>(\"\");\n    private _options: { name: string; icon: string; tags: Tag[]; layerToAddTo: FilteredLayer }[];\n\n\n    constructor(\n        basemap: Basemap,\n        changes: Changes,\n        options: {\n            name: string,\n            icon: string,\n            tags: Tag[],\n            layerToAddTo: FilteredLayer\n        }[]) {\n        super(undefined);\n\n        this.zoomlevel = basemap.Location;\n        this.ListenTo(this.zoomlevel);\n        this._options = options;\n        this.ListenTo(this.curentAddSelection);\n        this.ListenTo(this.state);\n        this.state.setData(this.SELECTING_POI);\n        this.changes = changes;\n\n        const self = this;\n\n\n        basemap.map.on(\"click\", function (e) {\n                const location = e.latlng;\n                console.log(\"Clicked at \", location)\n                self.HandleClick(location.lat, location.lng)\n            }\n        );\n        \n        basemap.map.on(\"mousemove\", function(){\n            if (self.state.data === self.PLACING_POI) {\n\n                let icon = \"crosshair\";\n                for (const option of self._options) {\n                    if (option.name === self.curentAddSelection.data && option.icon !== undefined) {\n                        icon = 'url(\"' + option.icon + '\") 32 32 ,crosshair';\n                        console.log(\"Cursor icon: \", icon)\n                    }\n                }\n                document.getElementById('leafletDiv').style.cursor = icon;\n\n            } else {\n                // @ts-ignore\n                document.getElementById('leafletDiv').style.cursor = '';\n            }\n        });\n\n\n    }\n\n    private HandleClick(lat: number, lon: number): void {\n        this.state.setData(this.SELECTING_POI);\n        console.log(\"Handling click\", lat, lon, this.curentAddSelection.data);\n        for (const option of this._options) {\n            if (this.curentAddSelection.data === option.name) {\n                console.log(\"PLACING a \", option);\n\n                let feature = this.changes.createElement(option.tags, lat, lon);\n                option.layerToAddTo.AddNewElement(feature);\n\n                return;\n            }\n        }\n    }\n\n    protected InnerRender(): string {\n\n        if (this.zoomlevel.data.zoom < 19) {\n            return \"Zoom in om een punt toe te voegen\"\n        }\n\n        if (this.state.data === this.SELECTING_POI) {\n            var html = \"<form>\";\n            for (const option of this._options) {\n                // <button type='button'> looks SO retarded\n                // the default type of button is 'submit', which performs a POST and page reload\n                html += \"<button type='button' class='addPOIoption' value='\" + option.name + \"'>Voeg een \" + option.name + \" toe</button><br/>\";\n            }\n            html += \"</form>\";\n            return html;\n        }\n\n        if (this.state.data === this.PLACING_POI) {\n            return \"<div id='clickOnMapInstruction'>Klik op de kaart om een nieuw punt toe te voegen<div>\" +\n                \"<div id='cancelInstruction'>Klik hier om toevoegen te annuleren</div>\"\n        }\n\n        if (this.curentAddSelection.data === \"\") {\n            return \"<span onclick>Voeg een punt toe...</span>\"\n        }\n        return \"Annuleer\";\n    }\n\n    InnerUpdate(htmlElement: HTMLElement) {\n        const self = this;\n\n        htmlElement.onclick = function (event) {\n            if(event.consumed){\n                return;\n            }\n            if (self.state.data === self.PLACING_POI) {\n                self.state.setData(self.SELECTING_POI);\n            }\n\n        }\n\n        const buttons = htmlElement.getElementsByClassName('addPOIoption');\n        // @ts-ignore\n        for (const button of buttons) {\n            button.onclick = function (event) {\n                self.curentAddSelection.setData(button.value);\n                self.state.setData(self.PLACING_POI);\n                event.consumed = true;\n            }\n        }\n    }\n\n\n}"]}