{"version":3,"sources":["UI/UIElement.ts","UI/UserBadge.ts"],"names":[],"mappings":"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","file":"UserBadge.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    protected ListenTo(source: UIEventSource<any>) {\n        if(source === undefined){\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    Update(): void {\n        let element  = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n        \n        element.innerHTML = this.InnerRender();\n        this.InnerUpdate(element);\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    abstract InnerUpdate(htmlElement : HTMLElement);\n\n    Render(): string {\n        return \"<div class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</div>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        element.innerHTML = this.Render();\n    }\n\n    protected abstract InnerRender(): string;\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","import {UIElement} from \"./UIElement\";\nimport {UserDetails} from \"../Logic/OsmConnection\";\nimport {UIEventSource} from \"./UIEventSource\";\n\n/**\n * Handles and updates the user badge\n */\nexport class UserBadge extends UIElement {\n    private _userDetails: UIEventSource<UserDetails>;\n\n\n    constructor(userDetails: UIEventSource<UserDetails>) {\n        super(userDetails);\n        this._userDetails = userDetails;\n\n        userDetails.addCallback(function () {\n            const profilePic = document.getElementById(\"profile-pic\");\n            profilePic.onload = function () {\n                profilePic.style.opacity = \"1\"\n            };\n        });\n\n    }\n\n    protected InnerRender(): string {\n        const user = this._userDetails.data;\n        if (!user.loggedIn) {\n            return \"<div class='activate-osm-authentication'>Klik hier om aan te melden bij OSM</div>\";\n        }\n\n        return \"<img id='profile-pic' src='\" + user.img + \"'/> \" +\n            \"<div id='usertext'>\"+\n            \"<div id='username'>\" +\n            \"<a href='https://www.openstreetmap.org/user/\"+user.name+\"' target='_blank'>\" + user.name + \"</a></div> <br />\" +\n            \"<div id='csCount'> \" +\n            \"   <a href='https://www.openstreetmap.org/user/\"+user.name+\"/history' target='_blank'><img class='star' src='./assets/star.svg'/>\" + user.csCount + \"</div></a>\" +\n            \"</div>\";\n    }\n\n    InnerUpdate(htmlElement: HTMLElement) {\n    }\n\n}"]}