{"version":3,"sources":["UI/UIElement.ts","UI/Base/VariableUIElement.ts","UI/UIEventSource.ts","UI/Base/DropDownUI.ts","test.ts"],"names":[],"mappings":";;;;;;AIGA,IAAA,mBAAA,GAAA,OAAA,CAAA,6BAAA,CAAA;AJAA,AEHA,IFGA,AEHA,SFGA,IEHA;AFGA,AEHA,AEIA,IAAA,YAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;AJDA,AEHA,YFGA,AEHA;AFYI,AEPA,AEAJ,IAAA,OJOI,AEPA,QEAJ,CJOI,CAAsB,CIP1B,EFAI,CAAY,EFOZ,EAAgD,AEPhD,AEAJ,CAAA,CFAuB,mBEAvB,CAAA;AJKY,AEPA,SFOA,AEPA,UAAA,EFOA,CEPa,EFOE,AEPf,KFOA;AAGJ,AEPA,AECR,OAAO,CAAC,CJMK,AEPA,EFOL,AINR,CAAY,CFDJ,CFOU,EEPE,AECpB,IFDQ,UFO0B,SAAS,CAAC,MAApC;AACA,AEPH,AEGL,IAAI,KJIS,EIJF,GAAG,EJIN,EIJU,CJIK,MAAf,QIJU,CAAA,aAAJ,CAA0B,GAA1B,CAAd;AJKQ,AIJR,IJIQ,GIJD,CAAC,KJIS,CAAC,KIJlB,CJIQ,AIJY,UAAC,IAAD,EAAK;AJKjB,AENG,AEEP,EFFO,AEEP,OJIS,AIJF,CAAC,GAAR,CAAY,CFFL,CAAA,CFMH,CAAc,GIJlB,EAAqB,CJIjB,CENG,CAAA,IEEqB,CAAC,IAA7B,EFFO,GAAP,UAAmB,QAAnB,EAAuD;AFOtD,AENG,AEEP,CAFD,QFAa,UAAL,CAAgB,IAAhB,CAAqB,QAArB;AEIR,IAAI,YAAA,CAAA,UAAJ,CAAe,MAAf,EACI,CAAC;AJIS,AERN,AEIF,EJIQ,AIJR,KAAK,EAAE,EJIC,AERC,CFQD,AIJT,GFJG,MFQM,CAAA,QAAA,GAAV,UAAmB,MAAnB,EAA6C;AACzC,AERH,AEGa,EAAA,CFNP,IEMY,CJKX,CILa,KJKP,KAAK,SAAf,EAA0B;AACtB,AINP,CAAD,EACI;AJMC,AERE,AEEF,EFFE,AEEF,KAAK,EAAE,GAAR,GFFG,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,CAAf,EAAmB;AACf,AECa,EAAA,KAAK,CFDd,CECgB,IFDX,IAAL,KAAc,CAAlB,EAAqB;AFQrB,AEPI,AEAJ,CADJ,EAEI,KJMM,IAAI,GAAG,IAAb;AACA,AEPC,AEAA,EAAA,EJOD,GIPM,EAAE,CJOF,CAAC,CIPP,UJOA,CAAmB,YAAA;AACf,AIRS,EAAA,IJQT,CIRc,EAAE,CJQZ,CAAC,MAAL;AACH,AERD,AEDA,CAFJ,CADJ,EAIO,CJMC,IENK,EEJb,EFIQ,AECN,GFDkB,CAAZ,IEJR,CAKW,SALX;AJaK,AERG,AEGR,GJHc,CIGV,KFHS,IAAL,UEGJ,CAAA,iBAAJ,CAAsB,OAAtB,EAA+B,QAA/B,CAAwC,UAAxC;AFFK,AEIL,GFVW,GEUL,CAAC,UAAP,CAAkB,YAAA;AJOP,AIPc,EJOd,AIPc,OAAO,CAAC,CJOtB,CAAA,KIPc,CAAgB,GJO9B,AIPc,CJOd,OAAA,GAAP,UAAe,CAAf,EAA8B;AAC1B,AEVG,AEEmC,CAA9C,CFFW,CEEqC,IAAhD,EJQa,MEVF,CAAA,CFUH,GAAgB,CAAhB,IEVG,CAAA,IAAA,GAAP,YAAA;AFWI,AEVA,SFUK,AEVkB,IAAA,EFUvB,AEVuB,GAAA,CAAA,EAAA,EAAA,GAAA,KAAK,UAA5B,EAAuB,EAAA,GAAA,EAAA,CAAA,MAAvB,EAAuB,EAAA,EAAvB,EAAwC;AFWxC,AEXK,UAAM,CFWJ,IAAP,GEXmB,GAAA,EAAA,CAAA,EAAA,CAAd;ACxBb,AFAA,ADoCK,AEXO,GFOD,CGhCX,AFAA,ECyBY,QAAQ,CDzBpB,ACyBqB,GDzBrB,CEAA,CDyB0B,ECzB1B,EDyBoB,CDzBpB,ACyBY,CDzBZ,GEAA,CAAA,UFAA,CAAA,OEAA,CAAA;AD0BS;ACzBT,AFEA,ADmCI,AEXC,EFWD,CEfO,CCtBX,AFEA,ODmCI,CAAA,GGrCJ,GAAA,GFEA,ADmCI,CAAA,GGrCJ,CAAA,EHqCI,GAAA,SGrCJ,CAAA,EHqCI;ACnCJ,ADoCQ,QAAI,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,KAAK,EAA7B,CAAd;AGpCR,AFAA,AC0BW,EAAA,EC1BX,MFAA,IEAA,CD0BW,CD1BX,AC0BW,ED1BX,OC0BW,CAAA,GAAA,GAAP,UAAc,CAAd,EAA2B;AC1B/B,AFAuC,ADqC/B,AEVA,ED3B+B,MDqC3B,AEVE,GD3ByB,CAAA,AC2BrB,GFUC,AEVE,IAAb,CFUgB,IAAZ,IAAoB,CCrCO,EAAA,IDqCA,ECrCA,CAAA,EDqCK,SAApC,EAA+C;AGrCvD,AHsCY,AEVJ,SAAK,CC5Bb,MAAA,EAAA,ED4BQ,CAAiB,YAAA;AC5BO,AFI5B,ADmCQ,AEVA,EC7BoB,ID6BpB,KC7BoB,AFI5B,CEJ4B,GD6BX,CAAC,MC7BU,CD6BpB,CC7BoB,AD6BF,CAAC,CAAC,EDzB5B,CAAY,CEJgB,AD6BI,CC7BJ,AD6BK,EDzBjC,EAAyC,ACyBd,CAAnB,UDzBR,EAAwG;AAA/D,ADoCpC,AEVG,MAAA,ED1BiC,OC0BxB,CAAC,GD1BuB,CC0BjC,ID1BiC,KAAA,CAAA,EAAA;AEEzC,AFFyC,AC2BpC,KAHD,CDxBqC,KEEzC,MFFyC,GAAA,CEEzC,CAAY,KAAZ,EAA2B,AFFc,MEEzC,EACY,eADZ,EAC8D;AAAlD,AFH4F,ADsCpG,AEVA,IFUA,IGnCQ,ADyBF,GFUC,CAAC,KEVO,GAAG,CFUlB,EGnCQ,CHmCY,AEVE,ICzBd,CHmCiB,IGnCjB,CAAA,EAAA,CDyBU,CACd,CAAC,CFSe,AETd,EFSN,GETW,IAAN,CADa,CAAlB;ACzBQ,AD6BR,MC7BQ,KD6BD,SAAP,CC7BQ,GAAA,SAAA;AAAkD,AFH9D,ADuCI,AELH,GAZM,KDtBP,ADuCQ,KCvCR,ADuCa,GCtCT,MAAA,CAAA,EDsCA,ECtCA,ADsCuB,CCtCvB,IAAA,EAAM,IAAN,KAAW,IADf;ADwCQ,UAAI,OAAO,CAAC,SAAR,KAAsB,EAA1B,EAA8B;AGtCtC,AFAI,ADuCQ,AEJhB,IDnCQ,IEAJ,AHuCY,CCvCJ,ACmCZ,CDnCa,GEAT,EFAI,ADuCe,CGrCf,AHqCgB,ECvCH,IEEb,AFFA,ACmCR,CCjCQ,IAAA,CAAA,CHqCQ,CAAsB,EGrC9B,EAAM,CHqCE,CAA4B,OGrCpC,AHqCQ,GAAsC,EGrC9B,IAFpB,AHuCY;ACtCR,ADuCK,AEjDb,CAAA,EAAA,CDUQ,GDqCI,ECrCA,CAAC,GDuCM,SCvCX,GAAoB,WAApB;AEEA,AHsCQ,IGtCR,IHsCQ,CGtCJ,CAAC,KHsCU,CGtCf,AHsCgB,GGtCF,KAAd,KHsCQ,CAAsB,KAAtB,CAA4B,OAA5B,GAAsC,SAAtC;AGrCR,AFDH,ADuCQ,AEnDA,ICaL,GDbK,CAAA,CCaD,CAAC,OAAL,GAAe,CDbV,GAAA,ECaL,WDbK;ACcL,AHsCC,IGtCD,KAAI,CAAC,eAAL,GAAuB,eAAe,KAAA,IAAf,IAAA,eAAe,KAAA,KAAA,CAAf,GAAA,eAAA,GAAmB,IAAI,eAAA,CAAA,aAAJ,CAA0B,MAAM,CAAC,CAAD,CAAN,CAAU,KAApC,CAA1C;AFAM,EAAA,iBAAA,CAAA,SAAA,CAAA,WAAA,GAAV,YAAA;AECI,AFAA,ADuCA,QGvCG,AHuCC,GCvCG,EDuCE,GCvCG,KAAL,ADuCH,CCvCc,CEAA,CAAC,EFAnB,ADuCsB,EGvCnB,KAAyB,EHuC5B,EAAiC,KGvCjC,EAAsC;AAClC,AFAP,ADuCO,GCzCE,GEEF,IHuCM,CGvCF,CAAC,IHuCK,GAAG,IAAb,IGvCA,CAAqB,OAArB,CAA6B,MAAM,CAAC,CAAD,CAAN,CAAU,KAAvC;AACH;AFCL,ADsCQ,ECtCR,IDsCQ,OAAO,CAAC,KCtChB,CAAA,CDsCQ,GAAkB,KCtC1B,CAAA,MDsC0B,KCtC1B,GAAA,UAAY,WAAZ,EAAoC;AEAhC,AFCA,ADsCQ,ICtCR,IEDM,AHuCE,ECtCR,CAAA,CEDU,EHuCE,CGvCC,AHuCA,KGvCb,AFCA,CAAM,EDsCE,SCtCR,CAAiB,IAAjB,CAAiB,IAAjB,EAAkB,WAAlB;ADuCK,OAFD;AGrCJ,AFCA,IEDA,IFCG,CEDC,CAAC,GFCG,YEDR,AFCG,CEDkB,IFCI,OEDzB,CAAiC,CFCjC,EAAmC,SEDF;AAC7B,AFCA,ADsCA,MGvCA,AHuCA,IGvCI,CAAC,AFCA,EDsCE,CAAC,KAAR,CAAc,EGvCd,CFCA,CAAkB,SDsClB,ECtCA,CDsC8B,KAA9B;AGtCH,AFCA,ADsCG,KGzCJ,CHyCI,OAAO,CAAC,KAAR,CAAc,MAAd,GAAuB,SAAvB;ACrCP,ADsCI,GC3CL;;AEIC,AFIL,ADqCQ,SCrCR,ADqCa,WAAL,CAAiB,KCrCzB,EDqCQ;AC5DR,AD6DK,CC7DL,CAAuC,CDmCnC,UCnCmC,CAAA,SAAvC,CAAA;AEsBc,EAAA,UAAA,CAAA,SAAA,CAAA,WAAA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","file":"test.8d1fc802.js","sourceRoot":"..","sourcesContent":["import {UIEventSource} from \"./UIEventSource\";\nimport {Playground} from \"../Layers/Playground\";\n\nexport abstract class UIElement {\n\n    private static nextId: number = 0;\n\n    public readonly id: string;\n    public readonly _source: UIEventSource<any>;\n    \n    private _hideIfEmpty = false;\n\n    protected constructor(source: UIEventSource<any>) {\n        this.id = \"ui-element-\" + UIElement.nextId;\n        this._source = source;\n        UIElement.nextId++;\n        this.ListenTo(source);\n    }\n\n\n    protected ListenTo(source: UIEventSource<any>) {\n        if (source === undefined) {\n            return;\n        }\n        const self = this;\n        source.addCallback(() => {\n            self.Update();\n        })\n    }\n\n    private _onClick: () => void;\n\n    public onClick(f: (() => void)) {\n        this._onClick = f;\n        this.Update();\n        return this;\n    }\n\n    Update(): void {\n        let element = document.getElementById(this.id);\n        if (element === null || element === undefined) {\n            // The element is not painted\n            return;\n        }\n\n        element.innerHTML = this.InnerRender();\n        if (this._hideIfEmpty) {\n            if (element.innerHTML === \"\") {\n                element.parentElement.style.display = \"none\";\n            } else {\n                element.parentElement.style.display = undefined;\n            }\n        }\n\n        if (this._onClick !== undefined) {\n            const self = this;\n            element.onclick = () => {\n                self._onClick();\n            }\n            element.style.pointerEvents = \"all\";\n            element.style.cursor = \"pointer\";\n        }\n\n        this.InnerUpdate(element);\n    }\n    \n    HideOnEmpty(hide : boolean){\n        this._hideIfEmpty = hide;\n        this.Update();\n        return this;\n    }\n    \n    // Called after the HTML has been replaced. Can be used for css tricks\n    InnerUpdate(htmlElement : HTMLElement){}\n\n    Render(): string {\n        return \"<span class='uielement' id='\" + this.id + \"'>\" + this.InnerRender() + \"</span>\"\n    }\n\n    AttachTo(divId: string) {\n        let element = document.getElementById(divId);\n        if(element === null){\n            console.log(\"SEVERE: could not attach UIElement to \", divId);\n            return;\n        }\n        element.innerHTML = this.Render();\n        this.Update();\n        return this;\n    }\n\n    protected abstract InnerRender(): string;\n    public Activate(): void {};\n\n    public IsEmpty(): boolean {\n        return this.InnerRender() === \"\";\n    }\n\n}","import {UIElement} from \"../UIElement\";\nimport {UIEventSource} from \"../UIEventSource\";\n\nexport class VariableUiElement extends UIElement {\n    private _html: UIEventSource<string>;\n    private _innerUpdate: (htmlElement: HTMLElement) => void;\n\n    constructor(html: UIEventSource<string>, innerUpdate : ((htmlElement : HTMLElement) => void) = undefined) {\n        super(html);\n        this._html = html;\n        this._innerUpdate = innerUpdate;\n\n    }\n\n    protected InnerRender(): string {\n        return this._html.data;\n    }\n    \n    InnerUpdate(htmlElement: HTMLElement) {\n        super.InnerUpdate(htmlElement);\n        if(this._innerUpdate !== undefined){\n            this._innerUpdate(htmlElement);\n        }\n    }\n\n\n}","export class UIEventSource<T>{\n    \n    public data : T;\n    private _callbacks = [];\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n\n    public addCallback(callback: ((latestData : T) => void)) {\n        this._callbacks.push(callback);\n        return this;\n    }\n\n    public setData(t: T): void {\n        if (this.data === t) {\n            return;\n        }\n        this.data = t;\n        this.ping();\n    }\n\n    public ping(): void {\n        for (const callback of this._callbacks) {\n            callback(this.data);\n        }\n    }\n\n    public map<J>(f: ((T) => J)): UIEventSource<J> {\n        const self = this;\n        this.addCallback(function () {\n            newSource.setData(f(self.data));\n            newSource.ping();\n        });\n        const newSource = new UIEventSource<J>(\n            f(this.data)\n        );\n\n        return newSource;\n\n    }\n\n\n}","import {UIEventSource} from \"../UIEventSource\";\nimport {UIElement} from \"../UIElement\";\n\nexport class DropDownUI extends UIElement {\n\n    selectedElement: UIEventSource<string>\n    private _label: string;\n    private _values: { value: string; shown: string }[];\n\n    constructor(label: string, values: { value: string, shown: string }[],\n                selectedElement: UIEventSource<string> = undefined) {\n        super(undefined);\n        this._label = label;\n        this._values = values;\n        this.selectedElement = selectedElement ?? new UIEventSource<string>(values[0].value);\n        if(selectedElement.data === undefined){\n            this.selectedElement.setData(values[0].value)\n        }\n        const self = this;\n        this.selectedElement.addCallback(() => {\n            self.InnerUpdate();\n        });\n    }\n\n\n    protected InnerRender(): string {\n\n        let options = \"\";\n        for (const value of this._values) {\n            options += \"<option value='\" + value.value + \"'>\" + value.shown + \"</option>\"\n        }\n\n        return \"<form>\" +\n            \"<label for='dropdown-\" + this.id + \"'>\" + this._label + \"</label>\" +\n            \"<select name='dropdown-\" + this.id + \"' id='dropdown-\" + this.id + \"'>\" +\n            options +\n            \"</select>\" +\n            \"</form>\";\n    }\n\n    InnerUpdate() {\n        const self = this;\n        const e = document.getElementById(\"dropdown-\" + this.id);\n        // @ts-ignore\n        if (this.selectedElement.data !== e.value) {\n            // @ts-ignore\n            e.value = this.selectedElement.data;\n        }\n        e.onchange = function () {\n            // @ts-ignore\n            const selectedValue = e.options[e.selectedIndex].value;\n            console.log(\"Putting data\", selectedValue)\n            self.selectedElement.setData(selectedValue);\n        }\n        \n    }\n\n}","import {Geocoding} from \"./Logic/Geocoding\";\nimport {SearchAndGo} from \"./UI/SearchAndGo\";\nimport {TextField} from \"./UI/Base/TextField\";\nimport {VariableUiElement} from \"./UI/Base/VariableUIElement\";\nimport {DropDownUI} from \"./UI/Base/DropDownUI\";\nimport {UIEventSource} from \"./UI/UIEventSource\";\n\nconsole.log(\"HI\");\n\n\nvar control = new UIEventSource<string>(\"b\");\ncontrol.addCallback((data) => {\n    console.log(\"> GOT\", control.data)\n})\n\nnew DropDownUI(\"Test\",\n    [{value: \"a\", shown: \"a\"},\n        {value: \"b\", shown: \"b\"},\n        {value: \"c\", shown: \"c\"},\n    ], control\n).AttachTo(\"maindiv\");\n\n\nnew VariableUiElement(control).AttachTo(\"extradiv\");\n\nwindow.setTimeout(() => {control.setData(\"a\")}, 1000);"]}